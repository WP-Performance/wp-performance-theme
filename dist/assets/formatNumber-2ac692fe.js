import{g as Be}from"./_commonjsHelpers-725317a4.js";var gt="ais",gn=function(t){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.descendantName,i=r.modifierName,a=n?"-".concat(n):"",s=i?"--".concat(i):"";return"".concat(gt,"-").concat(t).concat(a).concat(s)}};function vn(){}var pn=function(t,r){return t},vt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},We=/[&<>"']/g,pt=RegExp(We.source);function yt(e){return e&&pt.test(e)?e.replace(We,function(t){return vt[t]}):e}var Rt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Le=/&(amp|quot|lt|gt|#39);/g,Ft=RegExp(Le.source);function yn(e){return e&&Ft.test(e)?e.replace(Le,function(t){return Rt[t]}):e}function de(e){"@babel/helpers - typeof";return de=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},de(e)}function Pt(e){return e===null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function jt(e){return de(e)==="object"&&e!==null}function _t(e){if(!jt(e)||Pt(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function U(e){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(e)}function bt(e){if(e==null)throw new TypeError("Cannot destructure "+e)}function me(){return me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},me.apply(this,arguments)}function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Oe(Object(r),!0).forEach(function(n){Ue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ue(e,t,r){return t=xt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xt(e){var t=Et(e,"string");return U(t)==="symbol"?t:String(t)}function Et(e,t){if(U(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(U(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var we={highlightPreTag:"__ais-highlight__",highlightPostTag:"__/ais-highlight__"},Z={highlightPreTag:"<mark>",highlightPostTag:"</mark>"};function Ve(e){return yt(e).replace(new RegExp(we.highlightPreTag,"g"),Z.highlightPreTag).replace(new RegExp(we.highlightPostTag,"g"),Z.highlightPostTag)}function X(e){return _t(e)&&typeof e.value!="string"?Object.keys(e).reduce(function(t,r){return I(I({},t),{},Ue({},r,X(e[r])))},{}):Array.isArray(e)?e.map(X):I(I({},e),{},{value:Ve(e.value)})}function Rn(e){return e.__escaped===void 0&&(e=e.map(function(t){var r=me({},(bt(t),t));return r._highlightResult&&(r._highlightResult=X(r._highlightResult)),r._snippetResult&&(r._snippetResult=X(r._snippetResult)),r}),e.__escaped=!0),e}function Fn(e){return e.map(function(t){return I(I({},t),{},{highlighted:Ve(t.highlighted)})})}function St(e){return btoa(encodeURIComponent(JSON.stringify(e)))}function Ot(e){return JSON.parse(decodeURIComponent(atob(e)))}function N(e){return e.$$type==="ais.index"}function wt(e){var t=e.name,r=e.connector,n=r===void 0?!1:r;return["https://www.algolia.com/doc/api-reference/widgets/",t,"/js/",n?"#connector":""].join("")}function Ht(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.map(function(i){return wt(i)}).join(", ");return function(i){return[i,"See documentation: ".concat(n)].filter(Boolean).join("\n\n")}}function Pn(e,t){for(var r,n=0;n<e.length;n++)if(r=e[n],t(r,n,e))return r}function At(e,t){if(!Array.isArray(e))return-1;for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function jn(e){var t=Z.highlightPostTag,r=Z.highlightPreTag,n=e.split(r),i=n.shift(),a=i?[{value:i,isHighlighted:!1}]:[];return n.forEach(function(s){var c=s.split(t);a.push({value:c[0],isHighlighted:!0}),c[1]!==""&&a.push({value:c[1],isHighlighted:!1})}),a}function _n(e,t){var r=Array.isArray(t)?t:t.split(".");return r.reduce(function(n,i){return n&&n[i]},e)}function He(e){return e!==Object(e)}function Tt(e,t){if(e===t)return!0;if(He(e)||He(t)||typeof e=="function"||typeof t=="function")return e===t;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];if(!(i in t)||!Tt(e[i],t[i]))return!1}return!0}function Qt(e){return e.filter(function(t,r,n){return n.indexOf(t)===r})}function V(e){"@babel/helpers - typeof";return V=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(e)}var Dt=["facets","disjunctiveFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacets","hierarchicalFacetsRefinements","ruleContexts"];function Ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ae(Object(r),!0).forEach(function(n){It(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function It(e,t,r){return t=Ct(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ct(e){var t=Nt(e,"string");return V(t)==="symbol"?t:String(t)}function Nt(e,t){if(V(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(V(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $t(e,t){if(e==null)return{};var r=Bt(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Bt(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var Wt=function(t,r){r.facets,r.disjunctiveFacets,r.facetsRefinements,r.facetsExcludes,r.disjunctiveFacetsRefinements,r.numericRefinements,r.tagRefinements,r.hierarchicalFacets,r.hierarchicalFacetsRefinements,r.ruleContexts;var n=$t(r,Dt);return t.setQueryParameters(n)},Lt=function(t,r){return r.facets.reduce(function(n,i){return n.addFacet(i)},t)},Ut=function(t,r){return r.disjunctiveFacets.reduce(function(n,i){return n.addDisjunctiveFacet(i)},t)},Vt=function(t,r){return t.setQueryParameters({hierarchicalFacets:r.hierarchicalFacets.reduce(function(n,i){var a=At(n,function(c){return c.name===i.name});if(a===-1)return n.concat(i);var s=n.slice();return s.splice(a,1,i),s},t.hierarchicalFacets)})},kt=function(t,r){return r.tagRefinements.reduce(function(n,i){return n.addTagRefinement(i)},t)},Mt=function(t,r){return t.setQueryParameters({facetsRefinements:w(w({},t.facetsRefinements),r.facetsRefinements)})},qt=function(t,r){return t.setQueryParameters({facetsExcludes:w(w({},t.facetsExcludes),r.facetsExcludes)})},zt=function(t,r){return t.setQueryParameters({disjunctiveFacetsRefinements:w(w({},t.disjunctiveFacetsRefinements),r.disjunctiveFacetsRefinements)})},Jt=function(t,r){return t.setQueryParameters({numericRefinements:w(w({},t.numericRefinements),r.numericRefinements)})},Kt=function(t,r){return t.setQueryParameters({hierarchicalFacetsRefinements:w(w({},t.hierarchicalFacetsRefinements),r.hierarchicalFacetsRefinements)})},Gt=function(t,r){var n=Qt([].concat(t.ruleContexts).concat(r.ruleContexts).filter(Boolean));return n.length>0?t.setQueryParameters({ruleContexts:n}):t},Zt=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.reduce(function(i,a){var s=Kt(i,a),c=Vt(s,a),o=kt(c,a),f=Jt(o,a),u=zt(f,a),g=qt(u,a),l=Mt(g,a),h=Ut(l,a),m=Gt(h,a),v=Lt(m,a);return Wt(v,a)})};function z(e,t,r){var n=t.getHelper();return{uiState:r,helper:n,parent:t,instantSearchInstance:e,state:n.state,renderState:e.renderState,templatesConfig:e.templatesConfig,createURL:t.createURL,scopedResults:[],searchMetadata:{isSearchStalled:e.status==="stalled"},status:e.status,error:e.error}}function Te(e,t){var r=t.getResults(),n=t.getHelper();return{helper:n,parent:t,instantSearchInstance:e,results:r,scopedResults:t.getScopedResults(),state:r?r._state:n.state,renderState:e.renderState,templatesConfig:e.templatesConfig,createURL:t.createURL,searchMetadata:{isSearchStalled:e.status==="stalled"},status:e.status,error:e.error}}function Xt(e){for(var t=e.getParent(),r=[e.getHelper().state];t!==null;)r=[t.getHelper().state].concat(r),t=t.getParent();return r}function bn(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{fallback:function(){}},r=t.fallback;return typeof window>"u"?r():e({window})}function ge(e){"@babel/helpers - typeof";return ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ge(e)}function xn(e){var t=e.getAttribute("data-insights-method"),r=e.getAttribute("data-insights-payload");if(typeof r!="string")throw new Error("The insights helper expects `data-insights-payload` to be a base64-encoded JSON string.");try{var n=Ot(r);return{method:t,payload:n}}catch(i){throw new Error("The insights helper was unable to parse `data-insights-payload`.")}}function Yt(e){var t=e.method,r=e.payload;if(ge(r)!=="object")throw new Error("The insights helper expects the payload to be an object.");var n;try{n=St(r)}catch(i){throw new Error("Could not JSON serialize the payload object.")}return'data-insights-method="'.concat(t,'" data-insights-payload="').concat(n,'"')}function En(e,t){return Yt({method:e,payload:t})}function j(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var Fe=j;j.prototype._events=void 0;j.prototype._maxListeners=void 0;j.defaultMaxListeners=10;j.prototype.setMaxListeners=function(e){if(!er(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this};j.prototype.emit=function(e){var t,r,n,i,a,s;if(this._events||(this._events={}),e==="error"&&(!this._events.error||k(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(r=this._events[e],ke(r))return!1;if(H(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),r.apply(this,i)}else if(k(r))for(i=Array.prototype.slice.call(arguments,1),s=r.slice(),n=s.length,a=0;a<n;a++)s[a].apply(this,i);return!0};j.prototype.addListener=function(e,t){var r;if(!H(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,H(t.listener)?t.listener:t),this._events[e]?k(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,k(this._events[e])&&!this._events[e].warned&&(ke(this._maxListeners)?r=j.defaultMaxListeners:r=this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),typeof console.trace=="function"&&console.trace())),this};j.prototype.on=j.prototype.addListener;j.prototype.once=function(e,t){if(!H(t))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this};j.prototype.removeListener=function(e,t){var r,n,i,a;if(!H(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],i=r.length,n=-1,r===t||H(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(k(r)){for(a=i;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){n=a;break}if(n<0)return this;r.length===1?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this};j.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[e]&&delete this._events[e],this;if(arguments.length===0){for(t in this._events)t!=="removeListener"&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],H(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this};j.prototype.listeners=function(e){var t;return!this._events||!this._events[e]?t=[]:H(this._events[e])?t=[this._events[e]]:t=this._events[e].slice(),t};j.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(H(t))return 1;if(t)return t.length}return 0};j.listenerCount=function(e,t){return e.listenerCount(t)};function H(e){return typeof e=="function"}function er(e){return typeof e=="number"}function k(e){return typeof e=="object"&&e!==null}function ke(e){return e===void 0}const Sn=Be(Fe);function tr(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}var Me=tr,rr=Fe,nr=Me;function te(e,t){this.main=e,this.fn=t,this.lastResults=null}nr(te,rr);te.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)};te.prototype.getModifiedState=function(e){return this.fn(e)};var ir=te;function ar(e){return typeof e!="string"?e:String(e).replace(/^-/,"\\-")}function sr(e){return typeof e!="string"?e:e.replace(/^\\-/,"-")}var Pe={escapeFacetValue:ar,unescapeFacetValue:sr};function cr(e){return typeof e=="object"&&e!==null?je(Array.isArray(e)?[]:{},e):e}function Y(e){return typeof e=="function"||Array.isArray(e)||Object.prototype.toString.call(e)==="[object Object]"}function je(e,t){if(e===t)return e;for(var r in t)if(!(!Object.prototype.hasOwnProperty.call(t,r)||r==="__proto__"||r==="constructor")){var n=t[r],i=e[r];typeof i<"u"&&typeof n>"u"||(Y(i)&&Y(n)?e[r]=je(i,n):e[r]=cr(n))}return e}function ur(e){Y(e)||(e={});for(var t=1,r=arguments.length;t<r;t++){var n=arguments[t];Y(n)&&je(e,n)}return e}var re=ur;function or(e){return e&&Object.keys(e).length>0}var _e=or;function fr(e,t){if(e===null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var be=fr,ae=re;function se(e){return Object.keys(e).sort().reduce(function(t,r){return t[r]=e[r],t},{})}var E={_getQueries:function(t,r){var n=[];return n.push({indexName:t,params:E._getHitsSearchParams(r)}),r.getRefinedDisjunctiveFacets().forEach(function(i){n.push({indexName:t,params:E._getDisjunctiveFacetSearchParams(r,i)})}),r.getRefinedHierarchicalFacets().forEach(function(i){var a=r.getHierarchicalFacetByName(i),s=r.getHierarchicalRefinement(i),c=r._getHierarchicalFacetSeparator(a);if(s.length>0&&s[0].split(c).length>1){var o=s[0].split(c).slice(0,-1).reduce(function(u,g,l){return u.concat({attribute:a.attributes[l],value:l===0?g:[u[u.length-1].value,g].join(c)})},[]);o.forEach(function(f,u){var g=E._getDisjunctiveFacetSearchParams(r,f.attribute,u===0);function l(v){return a.attributes.some(function(p){return p===v.split(":")[0]})}var h=(g.facetFilters||[]).reduce(function(v,p){if(Array.isArray(p)){var y=p.filter(function(F){return!l(F)});y.length>0&&v.push(y)}return typeof p=="string"&&!l(p)&&v.push(p),v},[]),m=o[u-1];u>0?g.facetFilters=h.concat(m.attribute+":"+m.value):g.facetFilters=h.length>0?h:void 0,n.push({indexName:t,params:g})})}}),n},_getHitsSearchParams:function(e){var t=e.facets.concat(e.disjunctiveFacets).concat(E._getHitsHierarchicalFacetsAttributes(e)).sort(),r=E._getFacetFilters(e),n=E._getNumericFilters(e),i=E._getTagFilters(e),a={facets:t.indexOf("*")>-1?["*"]:t,tagFilters:i};return r.length>0&&(a.facetFilters=r),n.length>0&&(a.numericFilters=n),se(ae({},e.getQueryParams(),a))},_getDisjunctiveFacetSearchParams:function(e,t,r){var n=E._getFacetFilters(e,t,r),i=E._getNumericFilters(e,t),a=E._getTagFilters(e),s={hitsPerPage:0,page:0,analytics:!1,clickAnalytics:!1};a.length>0&&(s.tagFilters=a);var c=e.getHierarchicalFacetByName(t);return c?s.facets=E._getDisjunctiveHierarchicalFacetAttribute(e,c,r):s.facets=t,i.length>0&&(s.numericFilters=i),n.length>0&&(s.facetFilters=n),se(ae({},e.getQueryParams(),s))},_getNumericFilters:function(e,t){if(e.numericFilters)return e.numericFilters;var r=[];return Object.keys(e.numericRefinements).forEach(function(n){var i=e.numericRefinements[n]||{};Object.keys(i).forEach(function(a){var s=i[a]||[];t!==n&&s.forEach(function(c){if(Array.isArray(c)){var o=c.map(function(f){return n+a+f});r.push(o)}else r.push(n+a+c)})})}),r},_getTagFilters:function(e){return e.tagFilters?e.tagFilters:e.tagRefinements.join(",")},_getFacetFilters:function(e,t,r){var n=[],i=e.facetsRefinements||{};Object.keys(i).sort().forEach(function(o){var f=i[o]||[];f.sort().forEach(function(u){n.push(o+":"+u)})});var a=e.facetsExcludes||{};Object.keys(a).sort().forEach(function(o){var f=a[o]||[];f.sort().forEach(function(u){n.push(o+":-"+u)})});var s=e.disjunctiveFacetsRefinements||{};Object.keys(s).sort().forEach(function(o){var f=s[o]||[];if(!(o===t||!f||f.length===0)){var u=[];f.sort().forEach(function(g){u.push(o+":"+g)}),n.push(u)}});var c=e.hierarchicalFacetsRefinements||{};return Object.keys(c).sort().forEach(function(o){var f=c[o]||[],u=f[0];if(u!==void 0){var g=e.getHierarchicalFacetByName(o),l=e._getHierarchicalFacetSeparator(g),h=e._getHierarchicalRootPath(g),m,v;if(t===o){if(u.indexOf(l)===-1||!h&&r===!0||h&&h.split(l).length===u.split(l).length)return;h?(v=h.split(l).length-1,u=h):(v=u.split(l).length-2,u=u.slice(0,u.lastIndexOf(l))),m=g.attributes[v]}else v=u.split(l).length-1,m=g.attributes[v];m&&n.push([m+":"+u])}}),n},_getHitsHierarchicalFacetsAttributes:function(e){var t=[];return e.hierarchicalFacets.reduce(function(n,i){var a=e.getHierarchicalRefinement(i.name)[0];if(!a)return n.push(i.attributes[0]),n;var s=e._getHierarchicalFacetSeparator(i),c=a.split(s).length,o=i.attributes.slice(0,c+1);return n.concat(o)},t)},_getDisjunctiveHierarchicalFacetAttribute:function(e,t,r){var n=e._getHierarchicalFacetSeparator(t);if(r===!0){var i=e._getHierarchicalRootPath(t),a=0;return i&&(a=i.split(n).length),[t.attributes[a]]}var s=e.getHierarchicalRefinement(t.name)[0]||"",c=s.split(n).length-1;return t.attributes.slice(0,c+1)},getSearchForFacetQuery:function(e,t,r,n){var i=n.isDisjunctiveFacet(e)?n.clearRefinements(e):n,a={facetQuery:t,facetName:e};return typeof r=="number"&&(a.maxFacetHits=r),se(ae({},E._getHitsSearchParams(i),a))}},hr=E,xe=function(){var t=Array.prototype.slice.call(arguments);return t.reduceRight(function(r,n){return Object.keys(Object(n)).forEach(function(i){n[i]!==void 0&&(r[i]!==void 0&&delete r[i],r[i]=n[i])}),r},{})},ne=function(t,r){if(Array.isArray(t)){for(var n=0;n<t.length;n++)if(r(t[n]))return t[n]}};function lr(e,t){return e.filter(function(r,n){return t.indexOf(r)>-1&&e.indexOf(r)===n})}var dr=lr;function qe(e){if(typeof e=="number")return e;if(typeof e=="string")return parseFloat(e);if(Array.isArray(e))return e.map(qe);throw new Error("The value should be a number, a parsable string or an array of those.")}var mr=qe,gr=function(t){return t===null?!1:/^[a-zA-Z0-9_-]{1,64}$/.test(t)},vr=xe,pr=_e,yr=be,Q={addRefinement:function(t,r,n){if(Q.isRefined(t,r,n))return t;var i=""+n,a=t[r]?t[r].concat(i):[i],s={};return s[r]=a,vr({},s,t)},removeRefinement:function(t,r,n){if(n===void 0)return Q.clearRefinement(t,function(a,s){return r===s});var i=""+n;return Q.clearRefinement(t,function(a,s){return r===s&&i===a})},toggleRefinement:function(t,r,n){if(n===void 0)throw new Error("toggleRefinement should be used with a value");return Q.isRefined(t,r,n)?Q.removeRefinement(t,r,n):Q.addRefinement(t,r,n)},clearRefinement:function(t,r,n){if(r===void 0)return pr(t)?{}:t;if(typeof r=="string")return yr(t,[r]);if(typeof r=="function"){var i=!1,a=Object.keys(t).reduce(function(s,c){var o=t[c]||[],f=o.filter(function(u){return!r(u,c,n)});return f.length!==o.length&&(i=!0),s[c]=f,s},{});return i?a:t}},isRefined:function(t,r,n){var i=!!t[r]&&t[r].length>0;if(n===void 0||!i)return i;var a=""+n;return t[r].indexOf(a)!==-1}},Rr=Q,ce=xe,ze=ne,Qe=dr,ve=re,pe=_e,De=be,ue=mr,Fr=gr,R=Rr;function Ee(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every(function(r,n){return Ee(t[n],r)}):e===t}function Pr(e,t){return ze(e,function(r){return Ee(r,t)})}function x(e){var t=e?x._parseNumbers(e):{};t.userToken!==void 0&&!Fr(t.userToken)&&console.warn("[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\n  - Format: [a-zA-Z0-9_-]{1,64}"),this.facets=t.facets||[],this.disjunctiveFacets=t.disjunctiveFacets||[],this.hierarchicalFacets=t.hierarchicalFacets||[],this.facetsRefinements=t.facetsRefinements||{},this.facetsExcludes=t.facetsExcludes||{},this.disjunctiveFacetsRefinements=t.disjunctiveFacetsRefinements||{},this.numericRefinements=t.numericRefinements||{},this.tagRefinements=t.tagRefinements||[],this.hierarchicalFacetsRefinements=t.hierarchicalFacetsRefinements||{};var r=this;Object.keys(t).forEach(function(n){var i=x.PARAMETERS.indexOf(n)!==-1,a=t[n]!==void 0;!i&&a&&(r[n]=t[n])})}x.PARAMETERS=Object.keys(new x);x._parseNumbers=function(e){if(e instanceof x)return e;var t={},r=["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"];if(r.forEach(function(i){var a=e[i];if(typeof a=="string"){var s=parseFloat(a);t[i]=isNaN(s)?a:s}}),Array.isArray(e.insideBoundingBox)&&(t.insideBoundingBox=e.insideBoundingBox.map(function(i){return Array.isArray(i)?i.map(function(a){return parseFloat(a)}):i})),e.numericRefinements){var n={};Object.keys(e.numericRefinements).forEach(function(i){var a=e.numericRefinements[i]||{};n[i]={},Object.keys(a).forEach(function(s){var c=a[s],o=c.map(function(f){return Array.isArray(f)?f.map(function(u){return typeof u=="string"?parseFloat(u):u}):typeof f=="string"?parseFloat(f):f});n[i][s]=o})}),t.numericRefinements=n}return ve({},e,t)};x.make=function(t){var r=new x(t),n=t.hierarchicalFacets||[];return n.forEach(function(i){if(i.rootPath){var a=r.getHierarchicalRefinement(i.name);a.length>0&&a[0].indexOf(i.rootPath)!==0&&(r=r.clearRefinements(i.name)),a=r.getHierarchicalRefinement(i.name),a.length===0&&(r=r.toggleHierarchicalFacetRefinement(i.name,i.rootPath))}}),r};x.validate=function(e,t){var r=t||{};return e.tagFilters&&r.tagRefinements&&r.tagRefinements.length>0?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):e.tagRefinements.length>0&&r.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):e.numericFilters&&r.numericRefinements&&pe(r.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):pe(e.numericRefinements)&&r.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null};x.prototype={constructor:x,clearRefinements:function(t){var r={numericRefinements:this._clearNumericRefinements(t),facetsRefinements:R.clearRefinement(this.facetsRefinements,t,"conjunctiveFacet"),facetsExcludes:R.clearRefinement(this.facetsExcludes,t,"exclude"),disjunctiveFacetsRefinements:R.clearRefinement(this.disjunctiveFacetsRefinements,t,"disjunctiveFacet"),hierarchicalFacetsRefinements:R.clearRefinement(this.hierarchicalFacetsRefinements,t,"hierarchicalFacet")};return r.numericRefinements===this.numericRefinements&&r.facetsRefinements===this.facetsRefinements&&r.facetsExcludes===this.facetsExcludes&&r.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&r.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(r)},clearTags:function(){return this.tagFilters===void 0&&this.tagRefinements.length===0?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(t){return t===this.index?this:this.setQueryParameters({index:t})},setQuery:function(t){return t===this.query?this:this.setQueryParameters({query:t})},setPage:function(t){return t===this.page?this:this.setQueryParameters({page:t})},setFacets:function(t){return this.setQueryParameters({facets:t})},setDisjunctiveFacets:function(t){return this.setQueryParameters({disjunctiveFacets:t})},setHitsPerPage:function(t){return this.hitsPerPage===t?this:this.setQueryParameters({hitsPerPage:t})},setTypoTolerance:function(t){return this.typoTolerance===t?this:this.setQueryParameters({typoTolerance:t})},addNumericRefinement:function(e,t,r){var n=ue(r);if(this.isNumericRefined(e,t,n))return this;var i=ve({},this.numericRefinements);return i[e]=ve({},i[e]),i[e][t]?(i[e][t]=i[e][t].slice(),i[e][t].push(n)):i[e][t]=[n],this.setQueryParameters({numericRefinements:i})},getConjunctiveRefinements:function(e){return this.isConjunctiveFacet(e)?this.facetsRefinements[e]||[]:[]},getDisjunctiveRefinements:function(e){return this.isDisjunctiveFacet(e)?this.disjunctiveFacetsRefinements[e]||[]:[]},getHierarchicalRefinement:function(e){return this.hierarchicalFacetsRefinements[e]||[]},getExcludeRefinements:function(e){return this.isConjunctiveFacet(e)?this.facetsExcludes[e]||[]:[]},removeNumericRefinement:function(e,t,r){var n=r;return n!==void 0?this.isNumericRefined(e,t,n)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(i,a){return a===e&&i.op===t&&Ee(i.val,ue(n))})}):this:t!==void 0?this.isNumericRefined(e,t)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(i,a){return a===e&&i.op===t})}):this:this.isNumericRefined(e)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(i,a){return a===e})}):this},getNumericRefinements:function(e){return this.numericRefinements[e]||{}},getNumericRefinement:function(e,t){return this.numericRefinements[e]&&this.numericRefinements[e][t]},_clearNumericRefinements:function(t){if(t===void 0)return pe(this.numericRefinements)?{}:this.numericRefinements;if(typeof t=="string")return De(this.numericRefinements,[t]);if(typeof t=="function"){var r=!1,n=this.numericRefinements,i=Object.keys(n).reduce(function(a,s){var c=n[s],o={};return c=c||{},Object.keys(c).forEach(function(f){var u=c[f]||[],g=[];u.forEach(function(l){var h=t({val:l,op:f},s,"numeric");h||g.push(l)}),g.length!==u.length&&(r=!0),o[f]=g}),a[s]=o,a},{});return r?i:this.numericRefinements}},addFacet:function(t){return this.isConjunctiveFacet(t)?this:this.setQueryParameters({facets:this.facets.concat([t])})},addDisjunctiveFacet:function(t){return this.isDisjunctiveFacet(t)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([t])})},addHierarchicalFacet:function(t){if(this.isHierarchicalFacet(t.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+t.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([t])})},addFacetRefinement:function(t,r){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return R.isRefined(this.facetsRefinements,t,r)?this:this.setQueryParameters({facetsRefinements:R.addRefinement(this.facetsRefinements,t,r)})},addExcludeRefinement:function(t,r){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return R.isRefined(this.facetsExcludes,t,r)?this:this.setQueryParameters({facetsExcludes:R.addRefinement(this.facetsExcludes,t,r)})},addDisjunctiveFacetRefinement:function(t,r){if(!this.isDisjunctiveFacet(t))throw new Error(t+" is not defined in the disjunctiveFacets attribute of the helper configuration");return R.isRefined(this.disjunctiveFacetsRefinements,t,r)?this:this.setQueryParameters({disjunctiveFacetsRefinements:R.addRefinement(this.disjunctiveFacetsRefinements,t,r)})},addTagRefinement:function(t){if(this.isTagRefined(t))return this;var r={tagRefinements:this.tagRefinements.concat(t)};return this.setQueryParameters(r)},removeFacet:function(t){return this.isConjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({facets:this.facets.filter(function(r){return r!==t})}):this},removeDisjunctiveFacet:function(t){return this.isDisjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.filter(function(r){return r!==t})}):this},removeHierarchicalFacet:function(t){return this.isHierarchicalFacet(t)?this.clearRefinements(t).setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.filter(function(r){return r.name!==t})}):this},removeFacetRefinement:function(t,r){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return R.isRefined(this.facetsRefinements,t,r)?this.setQueryParameters({facetsRefinements:R.removeRefinement(this.facetsRefinements,t,r)}):this},removeExcludeRefinement:function(t,r){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return R.isRefined(this.facetsExcludes,t,r)?this.setQueryParameters({facetsExcludes:R.removeRefinement(this.facetsExcludes,t,r)}):this},removeDisjunctiveFacetRefinement:function(t,r){if(!this.isDisjunctiveFacet(t))throw new Error(t+" is not defined in the disjunctiveFacets attribute of the helper configuration");return R.isRefined(this.disjunctiveFacetsRefinements,t,r)?this.setQueryParameters({disjunctiveFacetsRefinements:R.removeRefinement(this.disjunctiveFacetsRefinements,t,r)}):this},removeTagRefinement:function(t){if(!this.isTagRefined(t))return this;var r={tagRefinements:this.tagRefinements.filter(function(n){return n!==t})};return this.setQueryParameters(r)},toggleRefinement:function(t,r){return this.toggleFacetRefinement(t,r)},toggleFacetRefinement:function(t,r){if(this.isHierarchicalFacet(t))return this.toggleHierarchicalFacetRefinement(t,r);if(this.isConjunctiveFacet(t))return this.toggleConjunctiveFacetRefinement(t,r);if(this.isDisjunctiveFacet(t))return this.toggleDisjunctiveFacetRefinement(t,r);throw new Error("Cannot refine the undeclared facet "+t+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(t,r){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsRefinements:R.toggleRefinement(this.facetsRefinements,t,r)})},toggleExcludeFacetRefinement:function(t,r){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsExcludes:R.toggleRefinement(this.facetsExcludes,t,r)})},toggleDisjunctiveFacetRefinement:function(t,r){if(!this.isDisjunctiveFacet(t))throw new Error(t+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.setQueryParameters({disjunctiveFacetsRefinements:R.toggleRefinement(this.disjunctiveFacetsRefinements,t,r)})},toggleHierarchicalFacetRefinement:function(t,r){if(!this.isHierarchicalFacet(t))throw new Error(t+" is not defined in the hierarchicalFacets attribute of the helper configuration");var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(t)),i={},a=this.hierarchicalFacetsRefinements[t]!==void 0&&this.hierarchicalFacetsRefinements[t].length>0&&(this.hierarchicalFacetsRefinements[t][0]===r||this.hierarchicalFacetsRefinements[t][0].indexOf(r+n)===0);return a?r.indexOf(n)===-1?i[t]=[]:i[t]=[r.slice(0,r.lastIndexOf(n))]:i[t]=[r],this.setQueryParameters({hierarchicalFacetsRefinements:ce({},i,this.hierarchicalFacetsRefinements)})},addHierarchicalFacetRefinement:function(e,t){if(this.isHierarchicalFacetRefined(e))throw new Error(e+" is already refined.");if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration.");var r={};return r[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:ce({},r,this.hierarchicalFacetsRefinements)})},removeHierarchicalFacetRefinement:function(e){if(!this.isHierarchicalFacetRefined(e))return this;var t={};return t[e]=[],this.setQueryParameters({hierarchicalFacetsRefinements:ce({},t,this.hierarchicalFacetsRefinements)})},toggleTagRefinement:function(t){return this.isTagRefined(t)?this.removeTagRefinement(t):this.addTagRefinement(t)},isDisjunctiveFacet:function(e){return this.disjunctiveFacets.indexOf(e)>-1},isHierarchicalFacet:function(e){return this.getHierarchicalFacetByName(e)!==void 0},isConjunctiveFacet:function(e){return this.facets.indexOf(e)>-1},isFacetRefined:function(t,r){return this.isConjunctiveFacet(t)?R.isRefined(this.facetsRefinements,t,r):!1},isExcludeRefined:function(t,r){return this.isConjunctiveFacet(t)?R.isRefined(this.facetsExcludes,t,r):!1},isDisjunctiveFacetRefined:function(t,r){return this.isDisjunctiveFacet(t)?R.isRefined(this.disjunctiveFacetsRefinements,t,r):!1},isHierarchicalFacetRefined:function(t,r){if(!this.isHierarchicalFacet(t))return!1;var n=this.getHierarchicalRefinement(t);return r?n.indexOf(r)!==-1:n.length>0},isNumericRefined:function(t,r,n){if(n===void 0&&r===void 0)return!!this.numericRefinements[t];var i=this.numericRefinements[t]&&this.numericRefinements[t][r]!==void 0;if(n===void 0||!i)return i;var a=ue(n),s=Pr(this.numericRefinements[t][r],a)!==void 0;return i&&s},isTagRefined:function(t){return this.tagRefinements.indexOf(t)!==-1},getRefinedDisjunctiveFacets:function(){var t=this,r=Qe(Object.keys(this.numericRefinements).filter(function(n){return Object.keys(t.numericRefinements[n]).length>0}),this.disjunctiveFacets);return Object.keys(this.disjunctiveFacetsRefinements).filter(function(n){return t.disjunctiveFacetsRefinements[n].length>0}).concat(r).concat(this.getRefinedHierarchicalFacets()).sort()},getRefinedHierarchicalFacets:function(){var t=this;return Qe(this.hierarchicalFacets.map(function(r){return r.name}),Object.keys(this.hierarchicalFacetsRefinements).filter(function(r){return t.hierarchicalFacetsRefinements[r].length>0})).sort()},getUnrefinedDisjunctiveFacets:function(){var e=this.getRefinedDisjunctiveFacets();return this.disjunctiveFacets.filter(function(t){return e.indexOf(t)===-1})},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","hierarchicalFacets","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements"],getQueryParams:function(){var t=this.managedParameters,r={},n=this;return Object.keys(this).forEach(function(i){var a=n[i];t.indexOf(i)===-1&&a!==void 0&&(r[i]=a)}),r},setQueryParameter:function(t,r){if(this[t]===r)return this;var n={};return n[t]=r,this.setQueryParameters(n)},setQueryParameters:function(t){if(!t)return this;var r=x.validate(this,t);if(r)throw r;var n=this,i=x._parseNumbers(t),a=Object.keys(this).reduce(function(c,o){return c[o]=n[o],c},{}),s=Object.keys(i).reduce(function(c,o){var f=c[o]!==void 0,u=i[o]!==void 0;return f&&!u?De(c,[o]):(u&&(c[o]=i[o]),c)},a);return new this.constructor(s)},resetPage:function(){return this.page===void 0?this:this.setPage(0)},_getHierarchicalFacetSortBy:function(e){return e.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(e){return e.separator||" > "},_getHierarchicalRootPath:function(e){return e.rootPath||null},_getHierarchicalShowParentLevel:function(e){return typeof e.showParentLevel=="boolean"?e.showParentLevel:!0},getHierarchicalFacetByName:function(e){return ze(this.hierarchicalFacets,function(t){return t.name===e})},getHierarchicalFacetBreadcrumb:function(e){if(!this.isHierarchicalFacet(e))return[];var t=this.getHierarchicalRefinement(e)[0];if(!t)return[];var r=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),n=t.split(r);return n.map(function(i){return i.trim()})},toString:function(){return JSON.stringify(this,null,2)}};var Je=x,jr=function(t){return Array.isArray(t)?t.filter(Boolean):[]},_r=function(t,r){if(!Array.isArray(t))return-1;for(var n=0;n<t.length;n++)if(r(t[n]))return n;return-1},br=ne,Ke=function(t,r){var n=(r||[]).map(function(i){return i.split(":")});return t.reduce(function(a,s){var c=s.split(":"),o=br(n,function(f){return f[0]===c[0]});return c.length>1||!o?(a[0].push(c[0]),a[1].push(c[1]),a):(a[0].push(o[0]),a[1].push(o[1]),a)},[[],[]])};function xr(e,t){if(e!==t){var r=e!==void 0,n=e===null,i=t!==void 0,a=t===null;if(!a&&e>t||n&&i||!r)return 1;if(!n&&e<t||a&&r||!i)return-1}return 0}function Er(e,t,r){if(!Array.isArray(e))return[];Array.isArray(r)||(r=[]);var n=e.map(function(i,a){return{criteria:t.map(function(s){return i[s]}),index:a,value:i}});return n.sort(function(a,s){for(var c=-1;++c<a.criteria.length;){var o=xr(a.criteria[c],s.criteria[c]);if(o)return c>=r.length?o:r[c]==="desc"?-o:o}return a.index-s.index}),n.map(function(i){return i.value})}var Ge=Er,Sr=Qr,Ze=Pe,Or=ne,wr=Ke,Hr=Ge,Ar=Ze.escapeFacetValue,Tr=Ze.unescapeFacetValue;function Qr(e){return function(r,n){var i=e.hierarchicalFacets[n],a=e.hierarchicalFacetsRefinements[i.name]&&e.hierarchicalFacetsRefinements[i.name][0]||"",s=e._getHierarchicalFacetSeparator(i),c=e._getHierarchicalRootPath(i),o=e._getHierarchicalShowParentLevel(i),f=wr(e._getHierarchicalFacetSortBy(i)),u=r.every(function(h){return h.exhaustive}),g=Dr(f,s,c,o,a),l=r;return c&&(l=r.slice(c.split(s).length)),l.reduce(g,{name:e.hierarchicalFacets[n].name,count:null,isRefined:!0,path:null,escapedValue:null,exhaustive:u,data:null})}}function Dr(e,t,r,n,i){return function(s,c,o){var f=s;if(o>0){var u=0;for(f=s;u<o;){var g=f&&Array.isArray(f.data)?f.data:[];f=Or(g,function(h){return h.isRefined}),u++}}if(f){var l=Object.keys(c.data).map(function(h){return[h,c.data[h]]}).filter(function(h){var m=h[0];return Ir(m,f.path||r,i,t,r,n)});f.data=Hr(l.map(function(h){var m=h[0],v=h[1];return Cr(v,m,t,Tr(i),c.exhaustive)}),e[0],e[1])}return s}}function Ir(e,t,r,n,i,a){return i&&(e.indexOf(i)!==0||i===e)?!1:!i&&e.indexOf(n)===-1||i&&e.split(n).length-i.split(n).length===1||e.indexOf(n)===-1&&r.indexOf(n)===-1||r.indexOf(e)===0||e.indexOf(t+n)===0&&(a||e.indexOf(r)===0)}function Cr(e,t,r,n,i){var a=t.split(r);return{name:a[a.length-1].trim(),path:t,escapedValue:Ar(t),count:e,isRefined:n===t||n.indexOf(t+r)===0,exhaustive:i,data:null}}var oe=jr,ee=xe,Xe=Pe,S=ne,W=_r,Nr=Ke,$r=re,Ye=Ge,Ie=Xe.escapeFacetValue,et=Xe.unescapeFacetValue,Br=Sr;function Ce(e){var t={};return e.forEach(function(r,n){t[r]=n}),t}function fe(e,t,r){t&&t[r]&&(e.stats=t[r])}function Wr(e,t){return S(e,function(n){var i=n.attributes||[];return i.indexOf(t)>-1})}function A(e,t,r){var n=t[0];this._rawResults=t;var i=this;Object.keys(n).forEach(function(u){i[u]=n[u]}),Object.keys(r||{}).forEach(function(u){i[u]=r[u]}),this.processingTimeMS=t.reduce(function(u,g){return g.processingTimeMS===void 0?u:u+g.processingTimeMS},0),this.disjunctiveFacets=[],this.hierarchicalFacets=e.hierarchicalFacets.map(function(){return[]}),this.facets=[];var a=e.getRefinedDisjunctiveFacets(),s=Ce(e.facets),c=Ce(e.disjunctiveFacets),o=1,f=n.facets||{};Object.keys(f).forEach(function(u){var g=f[u],l=Wr(e.hierarchicalFacets,u);if(l){var h=l.attributes.indexOf(u),m=W(e.hierarchicalFacets,function(F){return F.name===l.name});i.hierarchicalFacets[m][h]={attribute:u,data:g,exhaustive:n.exhaustiveFacetsCount}}else{var v=e.disjunctiveFacets.indexOf(u)!==-1,p=e.facets.indexOf(u)!==-1,y;v&&(y=c[u],i.disjunctiveFacets[y]={name:u,data:g,exhaustive:n.exhaustiveFacetsCount},fe(i.disjunctiveFacets[y],n.facets_stats,u)),p&&(y=s[u],i.facets[y]={name:u,data:g,exhaustive:n.exhaustiveFacetsCount},fe(i.facets[y],n.facets_stats,u))}}),this.hierarchicalFacets=oe(this.hierarchicalFacets),a.forEach(function(u){var g=t[o],l=g&&g.facets?g.facets:{},h=e.getHierarchicalFacetByName(u);Object.keys(l).forEach(function(m){var v=l[m],p;if(h){p=W(e.hierarchicalFacets,function(P){return P.name===h.name});var y=W(i.hierarchicalFacets[p],function(P){return P.attribute===m});if(y===-1)return;i.hierarchicalFacets[p][y].data=$r({},i.hierarchicalFacets[p][y].data,v)}else{p=c[m];var F=n.facets&&n.facets[m]||{};i.disjunctiveFacets[p]={name:m,data:ee({},v,F),exhaustive:g.exhaustiveFacetsCount},fe(i.disjunctiveFacets[p],g.facets_stats,m),e.disjunctiveFacetsRefinements[m]&&e.disjunctiveFacetsRefinements[m].forEach(function(P){!i.disjunctiveFacets[p].data[P]&&e.disjunctiveFacetsRefinements[m].indexOf(et(P))>-1&&(i.disjunctiveFacets[p].data[P]=0)})}}),o++}),e.getRefinedHierarchicalFacets().forEach(function(u){var g=e.getHierarchicalFacetByName(u),l=e._getHierarchicalFacetSeparator(g),h=e.getHierarchicalRefinement(u);h.length===0||h[0].split(l).length<2||t.slice(o).forEach(function(m){var v=m&&m.facets?m.facets:{};Object.keys(v).forEach(function(p){var y=v[p],F=W(e.hierarchicalFacets,function(D){return D.name===g.name}),P=W(i.hierarchicalFacets[F],function(D){return D.attribute===p});if(P!==-1){var B={};if(h.length>0){var T=h[0].split(l)[0];B[T]=i.hierarchicalFacets[F][P].data[T]}i.hierarchicalFacets[F][P].data=ee(B,y,i.hierarchicalFacets[F][P].data)}}),o++})}),Object.keys(e.facetsExcludes).forEach(function(u){var g=e.facetsExcludes[u],l=s[u];i.facets[l]={name:u,data:f[u],exhaustive:n.exhaustiveFacetsCount},g.forEach(function(h){i.facets[l]=i.facets[l]||{name:u},i.facets[l].data=i.facets[l].data||{},i.facets[l].data[h]=0})}),this.hierarchicalFacets=this.hierarchicalFacets.map(Br(e)),this.facets=oe(this.facets),this.disjunctiveFacets=oe(this.disjunctiveFacets),this._state=e}A.prototype.getFacetByName=function(e){function t(r){return r.name===e}return S(this.facets,t)||S(this.disjunctiveFacets,t)||S(this.hierarchicalFacets,t)};function Lr(e,t){function r(u){return u.name===t}if(e._state.isConjunctiveFacet(t)){var n=S(e.facets,r);return n?Object.keys(n.data).map(function(u){var g=Ie(u);return{name:u,escapedValue:g,count:n.data[u],isRefined:e._state.isFacetRefined(t,g),isExcluded:e._state.isExcludeRefined(t,u)}}):[]}else if(e._state.isDisjunctiveFacet(t)){var i=S(e.disjunctiveFacets,r);return i?Object.keys(i.data).map(function(u){var g=Ie(u);return{name:u,escapedValue:g,count:i.data[u],isRefined:e._state.isDisjunctiveFacetRefined(t,g)}}):[]}else if(e._state.isHierarchicalFacet(t)){var a=S(e.hierarchicalFacets,r);if(!a)return a;var s=e._state.getHierarchicalFacetByName(t),c=e._state._getHierarchicalFacetSeparator(s),o=et(e._state.getHierarchicalRefinement(t)[0]||"");o.indexOf(s.rootPath)===0&&(o=o.replace(s.rootPath+c,""));var f=o.split(c);return f.unshift(t),tt(a,f,0),a}}function tt(e,t,r){e.isRefined=e.name===t[r],e.data&&e.data.forEach(function(n){tt(n,t,r+1)})}function rt(e,t,r,n){if(n=n||0,Array.isArray(t))return e(t,r[n]);if(!t.data||t.data.length===0)return t;var i=t.data.map(function(c){return rt(e,c,r,n+1)}),a=e(i,r[n]),s=ee({data:a},t);return s}A.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"];function Ur(e,t){return t.sort(e)}function Vr(e,t){var r=[],n=[],i=t.order||[],a=i.reduce(function(o,f,u){return o[f]=u,o},{});e.forEach(function(o){var f=o.path||o.name;a[f]!==void 0?r[a[f]]=o:n.push(o)}),r=r.filter(function(o){return o});var s=t.sortRemainingBy,c;return s==="hidden"?r:(s==="alpha"?c=[["path","name"],["asc","asc"]]:c=[["count"],["desc"]],r.concat(Ye(n,c[0],c[1])))}function kr(e,t){return e.renderingContent&&e.renderingContent.facetOrdering&&e.renderingContent.facetOrdering.values&&e.renderingContent.facetOrdering.values[t]}A.prototype.getFacetValues=function(e,t){var r=Lr(this,e);if(r){var n=ee({},t,{sortBy:A.DEFAULT_SORT,facetOrdering:!(t&&t.sortBy)}),i=this,a;if(Array.isArray(r))a=[e];else{var s=i._state.getHierarchicalFacetByName(r.name);a=s.attributes}return rt(function(c,o){if(n.facetOrdering){var f=kr(i,o);if(f)return Vr(c,f)}if(Array.isArray(n.sortBy)){var u=Nr(n.sortBy,A.DEFAULT_SORT);return Ye(c,u[0],u[1])}else if(typeof n.sortBy=="function")return Ur(n.sortBy,c);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")},r,a)}};A.prototype.getFacetStats=function(e){if(this._state.isConjunctiveFacet(e))return Ne(this.facets,e);if(this._state.isDisjunctiveFacet(e))return Ne(this.disjunctiveFacets,e)};function Ne(e,t){var r=S(e,function(n){return n.name===t});return r&&r.stats}A.prototype.getRefinements=function(){var e=this._state,t=this,r=[];return Object.keys(e.facetsRefinements).forEach(function(n){e.facetsRefinements[n].forEach(function(i){r.push(he(e,"facet",n,i,t.facets))})}),Object.keys(e.facetsExcludes).forEach(function(n){e.facetsExcludes[n].forEach(function(i){r.push(he(e,"exclude",n,i,t.facets))})}),Object.keys(e.disjunctiveFacetsRefinements).forEach(function(n){e.disjunctiveFacetsRefinements[n].forEach(function(i){r.push(he(e,"disjunctive",n,i,t.disjunctiveFacets))})}),Object.keys(e.hierarchicalFacetsRefinements).forEach(function(n){e.hierarchicalFacetsRefinements[n].forEach(function(i){r.push(Mr(e,n,i,t.hierarchicalFacets))})}),Object.keys(e.numericRefinements).forEach(function(n){var i=e.numericRefinements[n];Object.keys(i).forEach(function(a){i[a].forEach(function(s){r.push({type:"numeric",attributeName:n,name:s,numericValue:s,operator:a})})})}),e.tagRefinements.forEach(function(n){r.push({type:"tag",attributeName:"_tags",name:n})}),r};function he(e,t,r,n,i){var a=S(i,function(o){return o.name===r}),s=a&&a.data&&a.data[n]?a.data[n]:0,c=a&&a.exhaustive||!1;return{type:t,attributeName:r,name:n,count:s,exhaustive:c}}function Mr(e,t,r,n){var i=e.getHierarchicalFacetByName(t),a=e._getHierarchicalFacetSeparator(i),s=r.split(a),c=S(n,function(l){return l.name===t}),o=s.reduce(function(l,h){var m=l&&S(l.data,function(v){return v.name===h});return m!==void 0?m:l},c),f=o&&o.count||0,u=o&&o.exhaustive||!1,g=o&&o.path||"";return{type:"hierarchical",attributeName:t,name:g,count:f,exhaustive:u}}var nt=A,it="3.14.1",qr=Fe,zr=ir,Jr=Pe.escapeFacetValue,Kr=Me,Gr=re,Zr=_e,Xr=be,$=hr,Se=Je,ye=nt,at=it;function d(e,t,r){typeof e.addAlgoliaAgent=="function"&&e.addAlgoliaAgent("JS Helper ("+at+")"),this.setClient(e);var n=r||{};n.index=t,this.state=Se.make(n),this.lastResults=null,this._queryId=0,this._lastQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0}Kr(d,qr);d.prototype.search=function(){return this._search({onlyWithDerivedHelpers:!1}),this};d.prototype.searchOnlyWithDerivedHelpers=function(){return this._search({onlyWithDerivedHelpers:!0}),this};d.prototype.getQuery=function(){var e=this.state;return $._getHitsSearchParams(e)};d.prototype.searchOnce=function(e,t){var r=e?this.state.setQueryParameters(e):this.state,n=$._getQueries(r.index,r),i=this;if(this._currentNbQueries++,this.emit("searchOnce",{state:r}),t){this.client.search(n).then(function(a){i._currentNbQueries--,i._currentNbQueries===0&&i.emit("searchQueueEmpty"),t(null,new ye(r,a.results),r)}).catch(function(a){i._currentNbQueries--,i._currentNbQueries===0&&i.emit("searchQueueEmpty"),t(a,null,r)});return}return this.client.search(n).then(function(a){return i._currentNbQueries--,i._currentNbQueries===0&&i.emit("searchQueueEmpty"),{content:new ye(r,a.results),state:r,_originalResponse:a}},function(a){throw i._currentNbQueries--,i._currentNbQueries===0&&i.emit("searchQueueEmpty"),a})};d.prototype.findAnswers=function(e){console.warn("[algoliasearch-helper] answers is no longer supported");var t=this.state,r=this.derivedHelpers[0];if(!r)return Promise.resolve([]);var n=r.getModifiedState(t),i=Gr({attributesForPrediction:e.attributesForPrediction,nbHits:e.nbHits},{params:Xr($._getHitsSearchParams(n),["attributesToSnippet","hitsPerPage","restrictSearchableAttributes","snippetEllipsisText"])}),a="search for answers was called, but this client does not have a function client.initIndex(index).findAnswers";if(typeof this.client.initIndex!="function")throw new Error(a);var s=this.client.initIndex(n.index);if(typeof s.findAnswers!="function")throw new Error(a);return s.findAnswers(n.query,e.queryLanguages,i)};d.prototype.searchForFacetValues=function(e,t,r,n){var i=typeof this.client.searchForFacetValues=="function",a=typeof this.client.initIndex=="function";if(!i&&!a&&typeof this.client.search!="function")throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues");var s=this.state.setQueryParameters(n||{}),c=s.isDisjunctiveFacet(e),o=$.getSearchForFacetQuery(e,t,r,s);this._currentNbQueries++;var f=this,u;return i?u=this.client.searchForFacetValues([{indexName:s.index,params:o}]):a?u=this.client.initIndex(s.index).searchForFacetValues(o):(delete o.facetName,u=this.client.search([{type:"facet",facet:e,indexName:s.index,params:o}]).then(function(l){return l.results[0]})),this.emit("searchForFacetValues",{state:s,facet:e,query:t}),u.then(function(l){return f._currentNbQueries--,f._currentNbQueries===0&&f.emit("searchQueueEmpty"),l=Array.isArray(l)?l[0]:l,l.facetHits.forEach(function(h){h.escapedValue=Jr(h.value),h.isRefined=c?s.isDisjunctiveFacetRefined(e,h.escapedValue):s.isFacetRefined(e,h.escapedValue)}),l},function(g){throw f._currentNbQueries--,f._currentNbQueries===0&&f.emit("searchQueueEmpty"),g})};d.prototype.setQuery=function(e){return this._change({state:this.state.resetPage().setQuery(e),isPageReset:!0}),this};d.prototype.clearRefinements=function(e){return this._change({state:this.state.resetPage().clearRefinements(e),isPageReset:!0}),this};d.prototype.clearTags=function(){return this._change({state:this.state.resetPage().clearTags(),isPageReset:!0}),this};d.prototype.addDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this};d.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)};d.prototype.addHierarchicalFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addHierarchicalFacetRefinement(e,t),isPageReset:!0}),this};d.prototype.addNumericRefinement=function(e,t,r){return this._change({state:this.state.resetPage().addNumericRefinement(e,t,r),isPageReset:!0}),this};d.prototype.addFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addFacetRefinement(e,t),isPageReset:!0}),this};d.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)};d.prototype.addFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().addExcludeRefinement(e,t),isPageReset:!0}),this};d.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)};d.prototype.addTag=function(e){return this._change({state:this.state.resetPage().addTagRefinement(e),isPageReset:!0}),this};d.prototype.removeNumericRefinement=function(e,t,r){return this._change({state:this.state.resetPage().removeNumericRefinement(e,t,r),isPageReset:!0}),this};d.prototype.removeDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this};d.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)};d.prototype.removeHierarchicalFacetRefinement=function(e){return this._change({state:this.state.resetPage().removeHierarchicalFacetRefinement(e),isPageReset:!0}),this};d.prototype.removeFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeFacetRefinement(e,t),isPageReset:!0}),this};d.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)};d.prototype.removeFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().removeExcludeRefinement(e,t),isPageReset:!0}),this};d.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)};d.prototype.removeTag=function(e){return this._change({state:this.state.resetPage().removeTagRefinement(e),isPageReset:!0}),this};d.prototype.toggleFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().toggleExcludeFacetRefinement(e,t),isPageReset:!0}),this};d.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)};d.prototype.toggleRefinement=function(e,t){return this.toggleFacetRefinement(e,t)};d.prototype.toggleFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().toggleFacetRefinement(e,t),isPageReset:!0}),this};d.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)};d.prototype.toggleTag=function(e){return this._change({state:this.state.resetPage().toggleTagRefinement(e),isPageReset:!0}),this};d.prototype.nextPage=function(){var e=this.state.page||0;return this.setPage(e+1)};d.prototype.previousPage=function(){var e=this.state.page||0;return this.setPage(e-1)};function st(e){if(e<0)throw new Error("Page requested below 0.");return this._change({state:this.state.setPage(e),isPageReset:!1}),this}d.prototype.setCurrentPage=st;d.prototype.setPage=st;d.prototype.setIndex=function(e){return this._change({state:this.state.resetPage().setIndex(e),isPageReset:!0}),this};d.prototype.setQueryParameter=function(e,t){return this._change({state:this.state.resetPage().setQueryParameter(e,t),isPageReset:!0}),this};d.prototype.setState=function(e){return this._change({state:Se.make(e),isPageReset:!1}),this};d.prototype.overrideStateWithoutTriggeringChangeEvent=function(e){return this.state=new Se(e),this};d.prototype.hasRefinements=function(e){return Zr(this.state.getNumericRefinements(e))?!0:this.state.isConjunctiveFacet(e)?this.state.isFacetRefined(e):this.state.isDisjunctiveFacet(e)?this.state.isDisjunctiveFacetRefined(e):this.state.isHierarchicalFacet(e)?this.state.isHierarchicalFacetRefined(e):!1};d.prototype.isExcluded=function(e,t){return this.state.isExcludeRefined(e,t)};d.prototype.isDisjunctiveRefined=function(e,t){return this.state.isDisjunctiveFacetRefined(e,t)};d.prototype.hasTag=function(e){return this.state.isTagRefined(e)};d.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)};d.prototype.getIndex=function(){return this.state.index};function ct(){return this.state.page}d.prototype.getCurrentPage=ct;d.prototype.getPage=ct;d.prototype.getTags=function(){return this.state.tagRefinements};d.prototype.getRefinements=function(e){var t=[];if(this.state.isConjunctiveFacet(e)){var r=this.state.getConjunctiveRefinements(e);r.forEach(function(s){t.push({value:s,type:"conjunctive"})});var n=this.state.getExcludeRefinements(e);n.forEach(function(s){t.push({value:s,type:"exclude"})})}else if(this.state.isDisjunctiveFacet(e)){var i=this.state.getDisjunctiveRefinements(e);i.forEach(function(s){t.push({value:s,type:"disjunctive"})})}var a=this.state.getNumericRefinements(e);return Object.keys(a).forEach(function(s){var c=a[s];t.push({value:c,operator:s,type:"numeric"})}),t};d.prototype.getNumericRefinement=function(e,t){return this.state.getNumericRefinement(e,t)};d.prototype.getHierarchicalFacetBreadcrumb=function(e){return this.state.getHierarchicalFacetBreadcrumb(e)};d.prototype._search=function(e){var t=this.state,r=[],n=[];e.onlyWithDerivedHelpers||(n=$._getQueries(t.index,t),r.push({state:t,queriesCount:n.length,helper:this}),this.emit("search",{state:t,results:this.lastResults}));var i=this.derivedHelpers.map(function(c){var o=c.getModifiedState(t),f=o.index?$._getQueries(o.index,o):[];return r.push({state:o,queriesCount:f.length,helper:c}),c.emit("search",{state:o,results:c.lastResults}),f}),a=Array.prototype.concat.apply(n,i),s=this._queryId++;if(this._currentNbQueries++,!a.length)return Promise.resolve({results:[]}).then(this._dispatchAlgoliaResponse.bind(this,r,s));try{this.client.search(a).then(this._dispatchAlgoliaResponse.bind(this,r,s)).catch(this._dispatchAlgoliaError.bind(this,s))}catch(c){this.emit("error",{error:c})}};d.prototype._dispatchAlgoliaResponse=function(e,t,r){if(!(t<this._lastQueryIdReceived)){this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,this._currentNbQueries===0&&this.emit("searchQueueEmpty");var n=r.results.slice();e.forEach(function(i){var a=i.state,s=i.queriesCount,c=i.helper,o=n.splice(0,s);if(!a.index){c.emit("result",{results:null,state:a});return}c.lastResults=new ye(a,o),c.emit("result",{results:c.lastResults,state:a})})}};d.prototype._dispatchAlgoliaError=function(e,t){e<this._lastQueryIdReceived||(this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,this.emit("error",{error:t}),this._currentNbQueries===0&&this.emit("searchQueueEmpty"))};d.prototype.containsRefinement=function(e,t,r,n){return e||t.length!==0||r.length!==0||n.length!==0};d.prototype._hasDisjunctiveRefinements=function(e){return this.state.disjunctiveRefinements[e]&&this.state.disjunctiveRefinements[e].length>0};d.prototype._change=function(e){var t=e.state,r=e.isPageReset;t!==this.state&&(this.state=t,this.emit("change",{state:this.state,results:this.lastResults,isPageReset:r}))};d.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this};d.prototype.setClient=function(e){return this.client===e?this:(typeof e.addAlgoliaAgent=="function"&&e.addAlgoliaAgent("JS Helper ("+at+")"),this.client=e,this)};d.prototype.getClient=function(){return this.client};d.prototype.derive=function(e){var t=new zr(this,e);return this.derivedHelpers.push(t),t};d.prototype.detachDerivedHelper=function(e){var t=this.derivedHelpers.indexOf(e);if(t===-1)throw new Error("Derived helper already detached");this.derivedHelpers.splice(t,1)};d.prototype.hasPendingRequests=function(){return this._currentNbQueries>0};var Yr=d,ut=Yr,en=Je,tn=nt;function q(e,t,r){return new ut(e,t,r)}q.version=it;q.AlgoliaSearchHelper=ut;q.SearchParameters=en;q.SearchResults=tn;var rn=q;const J=Be(rn);function M(e){"@babel/helpers - typeof";return M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(e)}var nn=["initialSearchParameters"];function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$e(Object(r),!0).forEach(function(n){C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function C(e,t,r){return t=an(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function an(e){var t=sn(e,"string");return M(t)==="symbol"?t:String(t)}function sn(e,t){if(M(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(M(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ot(e){return fn(e)||on(e)||un(e)||cn()}function cn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function un(e,t){if(e){if(typeof e=="string")return Re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Re(e,t)}}function on(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fn(e){if(Array.isArray(e))return Re(e)}function Re(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hn(e,t){if(e==null)return{};var r=ln(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ln(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var L=Ht({name:"index-widget"});function ft(e,t){var r=t.state,n=t.isPageReset,i=t._uiState;r!==e.state&&(e.state=r,e.emit("change",{state:e.state,results:e.lastResults,isPageReset:n,_uiState:i}))}function K(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e.reduce(function(n,i){return N(i)||!i.getWidgetUiState&&!i.getWidgetState?n:i.getWidgetUiState?i.getWidgetUiState(n,t):i.getWidgetState(n,t)},r)}function G(e,t){var r=t.initialSearchParameters,n=hn(t,nn);return e.filter(function(i){return!N(i)}).reduce(function(i,a){return a.getWidgetSearchParameters?a.getWidgetSearchParameters(i,n):i},r)}function ht(e){var t=e.filter(N);t.length!==0&&t.forEach(function(r){var n=r.getHelper();ft(n,{state:n.state.resetPage(),isPageReset:!0}),ht(r.getWidgets())})}function lt(e){var t=e.filter(N);return t.reduce(function(r,n){return r.concat.apply(r,[{indexId:n.getIndexId(),results:n.getResults(),helper:n.getHelper()}].concat(ot(lt(n.getWidgets()))))},[])}var dn=function(t){if(t===void 0||t.indexName===void 0)throw new Error(L("The `indexName` option is required."));var r=t.indexName,n=t.indexId,i=n===void 0?r:n,a=[],s={},c=null,o=null,f=null,u=null,g=null;return{$$type:"ais.index",$$widgetType:"ais.index",getIndexName:function(){return r},getIndexId:function(){return i},getHelper:function(){return f},getResults:function(){var h;return(h=u)!==null&&h!==void 0&&h.lastResults?(u.lastResults._state=f.state,u.lastResults):null},getPreviousState:function(){return g},getScopedResults:function(){var h=this.getParent(),m=h?h.getWidgets():[this];return lt(m)},getParent:function(){return o},createURL:function(h){return typeof h=="function"?c._createURL(C({},i,h(s))):c._createURL(C({},i,K(a,{searchParameters:h,helper:f})))},getWidgets:function(){return a},addWidgets:function(h){var m=this;if(!Array.isArray(h))throw new Error(L("The `addWidgets` method expects an array of widgets."));if(h.some(function(v){return typeof v.init!="function"&&typeof v.render!="function"}))throw new Error(L("The widget definition expects a `render` and/or an `init` method."));return a=a.concat(h),c&&h.length&&(ft(f,{state:G(a,{uiState:s,initialSearchParameters:f.state}),_uiState:s}),h.forEach(function(v){if(v.getRenderState){var p=v.getRenderState(c.renderState[m.getIndexId()]||{},z(c,m,c._initialUiState));le({renderState:p,instantSearchInstance:c,parent:m})}}),h.forEach(function(v){v.init&&v.init(z(c,m,c._initialUiState))}),c.scheduleSearch()),this},removeWidgets:function(h){var m=this;if(!Array.isArray(h))throw new Error(L("The `removeWidgets` method expects an array of widgets."));if(h.some(function(p){return typeof p.dispose!="function"}))throw new Error(L("The widget definition expects a `dispose` method."));if(a=a.filter(function(p){return h.indexOf(p)===-1}),c&&h.length){var v=h.reduce(function(p,y){var F=y.dispose({helper:f,state:p,parent:m});return F||p},f.state);s=K(a,{searchParameters:v,helper:f}),f.setState(G(a,{uiState:s,initialSearchParameters:v})),a.length&&c.scheduleSearch()}return this},init:function(h){var m=this,v,p=h.instantSearchInstance,y=h.parent,F=h.uiState;if(f===null){c=p,o=y,s=F[i]||{};var P=p.mainHelper,B=G(a,{uiState:s,initialSearchParameters:new J.SearchParameters({index:r})});f=J({},B.index,B),f.search=function(){return p.onStateChange?(p.onStateChange({uiState:p.mainIndex.getWidgetUiState({}),setUiState:function(b){return p.setUiState(b,!1)}}),P):P.search()},f.searchWithoutTriggeringOnStateChange=function(){return P.search()},f.searchForFacetValues=function(_,b,ie,dt){var mt=f.state.setQueryParameters(dt);return P.searchForFacetValues(_,b,ie,mt)},u=P.derive(function(){return Zt.apply(void 0,ot(Xt(m)))});var T=(v=p._initialResults)===null||v===void 0?void 0:v[this.getIndexId()];if(T){var D=new J.SearchResults(new J.SearchParameters(T.state),T.results);u.lastResults=D,f.lastResults=D}f.on("change",function(_){var b=_.isPageReset;b&&ht(a)}),u.on("search",function(){p.scheduleStalledRender()}),u.on("result",function(_){var b=_.results;p.scheduleRender(),f.lastResults=b,g=b==null?void 0:b._state}),a.forEach(function(_){if(_.getRenderState){var b=_.getRenderState(p.renderState[m.getIndexId()]||{},z(p,m,F));le({renderState:b,instantSearchInstance:p,parent:m})}}),a.forEach(function(_){_.init&&_.init(z(p,m,F))}),f.on("change",function(_){var b=_.state,ie=_._uiState;s=K(a,{searchParameters:b,helper:f},ie||{}),p.onStateChange||p.onInternalStateChange()}),T&&p.scheduleRender()}},render:function(h){var m=this,v=h.instantSearchInstance;v.status==="error"&&!v.mainHelper.hasPendingRequests()&&g&&f.setState(g);var p=this.getResults()?a:a.filter(N);p.forEach(function(y){if(y.getRenderState){var F=y.getRenderState(v.renderState[m.getIndexId()]||{},Te(v,m));le({renderState:F,instantSearchInstance:v,parent:m})}}),p.forEach(function(y){y.render&&y.render(Te(v,m))})},dispose:function(){var h=this,m,v;a.forEach(function(p){p.dispose&&p.dispose({helper:f,state:f.state,parent:h})}),c=null,o=null,(m=f)===null||m===void 0||m.removeAllListeners(),f=null,(v=u)===null||v===void 0||v.detach(),u=null},getWidgetUiState:function(h){return a.filter(N).reduce(function(m,v){return v.getWidgetUiState(m)},O(O({},h),{},C({},i,O(O({},h[i]),s))))},getWidgetState:function(h){return this.getWidgetUiState(h)},getWidgetSearchParameters:function(h,m){var v=m.uiState;return G(a,{uiState:v,initialSearchParameters:h})},refreshUiState:function(){s=K(a,{searchParameters:this.getHelper().state,helper:this.getHelper()},s)},setIndexUiState:function(h){var m=typeof h=="function"?h(s):h;c.setUiState(function(v){return O(O({},v),{},C({},i,m))})}}};const On=dn;function le(e){var t=e.renderState,r=e.instantSearchInstance,n=e.parent,i=n?n.getIndexId():r.mainIndex.getIndexId();r.renderState=O(O({},r.renderState),{},C({},i,O(O({},r.renderState[i]),t)))}function wn(e,t){return e.toLocaleString(t)}export{Sn as E,Z as T,jn as a,Tt as b,gn as c,z as d,wn as e,Pn as f,_n as g,En as h,N as i,Ht as j,On as k,J as l,pn as m,vn as n,St as o,Qt as p,Rn as q,Zt as r,bn as s,_t as t,yn as u,xn as v,Ot as w,we as x,Fn as y};
