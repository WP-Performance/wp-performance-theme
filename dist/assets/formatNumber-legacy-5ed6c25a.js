System.register(["./_commonjsHelpers-legacy-16634a03.js"],(function(e,t){"use strict";var n;return{setters:[e=>{n=e.g}],execute:function(){e({a:function(e){var t=p.highlightPostTag,n=p.highlightPreTag,r=e.split(n),i=r.shift(),a=i?[{value:i,isHighlighted:!1}]:[];return r.forEach((function(e){var n=e.split(t);a.push({value:n[0],isHighlighted:!0}),""!==n[1]&&a.push({value:n[1],isHighlighted:!1})})),a},b:function e(t,n){if(t===n)return!0;if(P(t)||P(n)||"function"==typeof t||"function"==typeof n)return t===n;if(Object.keys(t).length!==Object.keys(n).length)return!1;for(var r=0,i=Object.keys(t);r<i.length;r++){var a=i[r];if(!(a in n))return!1;if(!e(t[a],n[a]))return!1}return!0},d:N,e:function(e,t){return e.toLocaleString(t)},f:function(e,t){for(var n,r=0;r<e.length;r++)if(t(n=e[r],r,e))return n},g:function(e,t){return(Array.isArray(t)?t:t.split(".")).reduce((function(e,t){return e&&e[t]}),e)},h:function(e,t){return function(e){var t,n=e.method,r=e.payload;if("object"!==D(r))throw new Error("The insights helper expects the payload to be an object.");try{t=R(r)}catch(i){throw new Error("Could not JSON serialize the payload object.")}return'data-insights-method="'.concat(n,'" data-insights-payload="').concat(t,'"')}({method:e,payload:t})},i:b,j:j,n:function(){},o:R,p:_,q:function(e){return void 0===e.__escaped&&((e=e.map((function(e){var t=h({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));return t._highlightResult&&(t._highlightResult=y(t._highlightResult)),t._snippetResult&&(t._snippetResult=y(t._snippetResult)),t}))).__escaped=!0),e},s:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fallback:function(){}},n=t.fallback;return"undefined"==typeof window?n():e({window:window})},t:o,u:function(e){return e&&c.test(e)?e.replace(s,(function(e){return a[e]})):e},v:function(e){var t=e.getAttribute("data-insights-method"),n=e.getAttribute("data-insights-payload");if("string"!=typeof n)throw new Error("The insights helper expects `data-insights-payload` to be a base64-encoded JSON string.");try{return{method:t,payload:F(n)}}catch(r){throw new Error("The insights helper was unable to parse `data-insights-payload`.")}},w:F,y:function(e){return e.map((function(e){return d(d({},e),{},{highlighted:v(e.highlighted)})}))}}),e("c",(function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.descendantName,r=t.modifierName,i=n?"-".concat(n):"",a=r?"--".concat(r):"";return"".concat("ais","-").concat(e).concat(i).concat(a)}})),e("m",(function(e,t){return e}));var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},r=/[&<>"']/g,i=RegExp(r.source),a={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},s=/&(amp|quot|lt|gt|#39);/g,c=RegExp(s.source);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function o(e){if(!function(e){return"object"===u(e)&&null!==e}(e)||"[object Object]"!==function(e){return null===e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}(e))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=e("x",{highlightPreTag:"__ais-highlight__",highlightPostTag:"__/ais-highlight__"}),p=e("T",{highlightPreTag:"<mark>",highlightPostTag:"</mark>"});function v(e){return function(e){return e&&i.test(e)?e.replace(r,(function(e){return t[e]})):e}(e).replace(new RegExp(g.highlightPreTag,"g"),p.highlightPreTag).replace(new RegExp(g.highlightPostTag,"g"),p.highlightPostTag)}function y(e){return o(e)&&"string"!=typeof e.value?Object.keys(e).reduce((function(t,n){return d(d({},t),{},m({},n,y(e[n])))}),{}):Array.isArray(e)?e.map(y):d(d({},e),{},{value:v(e.value)})}function R(e){return btoa(encodeURIComponent(JSON.stringify(e)))}function F(e){return JSON.parse(decodeURIComponent(atob(e)))}function b(e){return"ais.index"===e.$$type}function j(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map((function(e){return n=(t=e).name,r=t.connector,["https://www.algolia.com/doc/api-reference/widgets/",n,"/js/",void 0!==r&&r?"#connector":""].join("");var t,n,r})).join(", ");return function(e){return[e,"See documentation: ".concat(r)].filter(Boolean).join("\n\n")}}function P(e){return e!==Object(e)}function _(e){return e.filter((function(e,t,n){return n.indexOf(e)===t}))}function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}var S=["facets","disjunctiveFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacets","hierarchicalFacetsRefinements","ruleContexts"];function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==x(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===x(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var A=function(e,t){return e.setQueryParameters({hierarchicalFacets:t.hierarchicalFacets.reduce((function(e,t){var n=function(e,t){if(!Array.isArray(e))return-1;for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(e,(function(e){return e.name===t.name}));if(-1===n)return e.concat(t);var r=e.slice();return r.splice(n,1,t),r}),e.hierarchicalFacets)})},Q=e("r",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){var n=function(e,t){return e.setQueryParameters({hierarchicalFacetsRefinements:O(O({},e.hierarchicalFacetsRefinements),t.hierarchicalFacetsRefinements)})}(e,t),r=function(e,t){return t.tagRefinements.reduce((function(e,t){return e.addTagRefinement(t)}),e)}(A(n,t),t),i=function(e,t){return e.setQueryParameters({numericRefinements:O(O({},e.numericRefinements),t.numericRefinements)})}(r,t),a=function(e,t){return e.setQueryParameters({disjunctiveFacetsRefinements:O(O({},e.disjunctiveFacetsRefinements),t.disjunctiveFacetsRefinements)})}(i,t),s=function(e,t){return e.setQueryParameters({facetsExcludes:O(O({},e.facetsExcludes),t.facetsExcludes)})}(a,t),c=function(e,t){return e.setQueryParameters({facetsRefinements:O(O({},e.facetsRefinements),t.facetsRefinements)})}(s,t),u=function(e,t){return t.disjunctiveFacets.reduce((function(e,t){return e.addDisjunctiveFacet(t)}),e)}(c,t),o=function(e,t){var n=_([].concat(e.ruleContexts).concat(t.ruleContexts).filter(Boolean));return n.length>0?e.setQueryParameters({ruleContexts:n}):e}(u,t),f=function(e,t){return t.facets.reduce((function(e,t){return e.addFacet(t)}),e)}(o,t);return function(e,t){t.facets,t.disjunctiveFacets,t.facetsRefinements,t.facetsExcludes,t.disjunctiveFacetsRefinements,t.numericRefinements,t.tagRefinements,t.hierarchicalFacets,t.hierarchicalFacetsRefinements,t.ruleContexts;var n=H(t,S);return e.setQueryParameters(n)}(f,t)}))}));function N(e,t,n){var r=t.getHelper();return{uiState:n,helper:r,parent:t,instantSearchInstance:e,state:r.state,renderState:e.renderState,templatesConfig:e.templatesConfig,createURL:t.createURL,scopedResults:[],searchMetadata:{isSearchStalled:"stalled"===e.status},status:e.status,error:e.error}}function T(e,t){var n=t.getResults(),r=t.getHelper();return{helper:r,parent:t,instantSearchInstance:e,results:n,scopedResults:t.getScopedResults(),state:n?n._state:r.state,renderState:e.renderState,templatesConfig:e.templatesConfig,createURL:t.createURL,searchMetadata:{isSearchStalled:"stalled"===e.status},status:e.status,error:e.error}}function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function C(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var I=C;function k(e){return"function"==typeof e}function L(e){return"object"==typeof e&&null!==e}function B(e){return void 0===e}C.prototype._events=void 0,C.prototype._maxListeners=void 0,C.defaultMaxListeners=10,C.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},C.prototype.emit=function(e){var t,n,r,i,a,s;if(this._events||(this._events={}),"error"===e&&(!this._events.error||L(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(B(n=this._events[e]))return!1;if(k(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(L(n))for(i=Array.prototype.slice.call(arguments,1),r=(s=n.slice()).length,a=0;a<r;a++)s[a].apply(this,i);return!0},C.prototype.addListener=function(e,t){var n;if(!k(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,k(t.listener)?t.listener:t),this._events[e]?L(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,L(this._events[e])&&!this._events[e].warned&&(n=B(this._maxListeners)?C.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},C.prototype.on=C.prototype.addListener,C.prototype.once=function(e,t){if(!k(t))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},C.prototype.removeListener=function(e,t){var n,r,i,a;if(!k(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(n=this._events[e]).length,r=-1,n===t||k(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(L(n)){for(a=i;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},C.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(k(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},C.prototype.listeners=function(e){return this._events&&this._events[e]?k(this._events[e])?[this._events[e]]:this._events[e].slice():[]},C.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(k(t))return 1;if(t)return t.length}return 0},C.listenerCount=function(e,t){return e.listenerCount(t)},e("E",n(I));var U=function(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})};function W(e,t){this.main=e,this.fn=t,this.lastResults=null}U(W,I),W.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)},W.prototype.getModifiedState=function(e){return this.fn(e)};var V=W,q={escapeFacetValue:function(e){return"string"!=typeof e?e:String(e).replace(/^-/,"\\-")},unescapeFacetValue:function(e){return"string"!=typeof e?e:e.replace(/^\\-/,"-")}};function M(e){return"function"==typeof e||Array.isArray(e)||"[object Object]"===Object.prototype.toString.call(e)}function $(e,t){if(e===t)return e;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&"__proto__"!==n&&"constructor"!==n){var r=t[n],i=e[n];void 0!==i&&void 0===r||(M(i)&&M(r)?e[n]=$(i,r):e[n]="object"==typeof(a=r)&&null!==a?$(Array.isArray(a)?[]:{},a):a)}var a;return e}var J=function(e){M(e)||(e={});for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t];M(r)&&$(e,r)}return e},z=function(e){return e&&Object.keys(e).length>0},Z=function(e,t){if(null===e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i},G=J;function K(e){return Object.keys(e).sort().reduce((function(t,n){return t[n]=e[n],t}),{})}var X={_getQueries:function(e,t){var n=[];return n.push({indexName:e,params:X._getHitsSearchParams(t)}),t.getRefinedDisjunctiveFacets().forEach((function(r){n.push({indexName:e,params:X._getDisjunctiveFacetSearchParams(t,r)})})),t.getRefinedHierarchicalFacets().forEach((function(r){var i=t.getHierarchicalFacetByName(r),a=t.getHierarchicalRefinement(r),s=t._getHierarchicalFacetSeparator(i);if(a.length>0&&a[0].split(s).length>1){var c=a[0].split(s).slice(0,-1).reduce((function(e,t,n){return e.concat({attribute:i.attributes[n],value:0===n?t:[e[e.length-1].value,t].join(s)})}),[]);c.forEach((function(r,a){var s=X._getDisjunctiveFacetSearchParams(t,r.attribute,0===a);function u(e){return i.attributes.some((function(t){return t===e.split(":")[0]}))}var o=(s.facetFilters||[]).reduce((function(e,t){if(Array.isArray(t)){var n=t.filter((function(e){return!u(e)}));n.length>0&&e.push(n)}return"string"!=typeof t||u(t)||e.push(t),e}),[]),f=c[a-1];s.facetFilters=a>0?o.concat(f.attribute+":"+f.value):o.length>0?o:void 0,n.push({indexName:e,params:s})}))}})),n},_getHitsSearchParams:function(e){var t=e.facets.concat(e.disjunctiveFacets).concat(X._getHitsHierarchicalFacetsAttributes(e)).sort(),n=X._getFacetFilters(e),r=X._getNumericFilters(e),i=X._getTagFilters(e),a={facets:t.indexOf("*")>-1?["*"]:t,tagFilters:i};return n.length>0&&(a.facetFilters=n),r.length>0&&(a.numericFilters=r),K(G({},e.getQueryParams(),a))},_getDisjunctiveFacetSearchParams:function(e,t,n){var r=X._getFacetFilters(e,t,n),i=X._getNumericFilters(e,t),a=X._getTagFilters(e),s={hitsPerPage:0,page:0,analytics:!1,clickAnalytics:!1};a.length>0&&(s.tagFilters=a);var c=e.getHierarchicalFacetByName(t);return s.facets=c?X._getDisjunctiveHierarchicalFacetAttribute(e,c,n):t,i.length>0&&(s.numericFilters=i),r.length>0&&(s.facetFilters=r),K(G({},e.getQueryParams(),s))},_getNumericFilters:function(e,t){if(e.numericFilters)return e.numericFilters;var n=[];return Object.keys(e.numericRefinements).forEach((function(r){var i=e.numericRefinements[r]||{};Object.keys(i).forEach((function(e){var a=i[e]||[];t!==r&&a.forEach((function(t){if(Array.isArray(t)){var i=t.map((function(t){return r+e+t}));n.push(i)}else n.push(r+e+t)}))}))})),n},_getTagFilters:function(e){return e.tagFilters?e.tagFilters:e.tagRefinements.join(",")},_getFacetFilters:function(e,t,n){var r=[],i=e.facetsRefinements||{};Object.keys(i).sort().forEach((function(e){(i[e]||[]).sort().forEach((function(t){r.push(e+":"+t)}))}));var a=e.facetsExcludes||{};Object.keys(a).sort().forEach((function(e){(a[e]||[]).sort().forEach((function(t){r.push(e+":-"+t)}))}));var s=e.disjunctiveFacetsRefinements||{};Object.keys(s).sort().forEach((function(e){var n=s[e]||[];if(e!==t&&n&&0!==n.length){var i=[];n.sort().forEach((function(t){i.push(e+":"+t)})),r.push(i)}}));var c=e.hierarchicalFacetsRefinements||{};return Object.keys(c).sort().forEach((function(i){var a=(c[i]||[])[0];if(void 0!==a){var s,u,o=e.getHierarchicalFacetByName(i),f=e._getHierarchicalFacetSeparator(o),h=e._getHierarchicalRootPath(o);if(t===i){if(-1===a.indexOf(f)||!h&&!0===n||h&&h.split(f).length===a.split(f).length)return;h?(u=h.split(f).length-1,a=h):(u=a.split(f).length-2,a=a.slice(0,a.lastIndexOf(f))),s=o.attributes[u]}else u=a.split(f).length-1,s=o.attributes[u];s&&r.push([s+":"+a])}})),r},_getHitsHierarchicalFacetsAttributes:function(e){return e.hierarchicalFacets.reduce((function(t,n){var r=e.getHierarchicalRefinement(n.name)[0];if(!r)return t.push(n.attributes[0]),t;var i=e._getHierarchicalFacetSeparator(n),a=r.split(i).length,s=n.attributes.slice(0,a+1);return t.concat(s)}),[])},_getDisjunctiveHierarchicalFacetAttribute:function(e,t,n){var r=e._getHierarchicalFacetSeparator(t);if(!0===n){var i=e._getHierarchicalRootPath(t),a=0;return i&&(a=i.split(r).length),[t.attributes[a]]}var s=(e.getHierarchicalRefinement(t.name)[0]||"").split(r).length-1;return t.attributes.slice(0,s+1)},getSearchForFacetQuery:function(e,t,n,r){var i=r.isDisjunctiveFacet(e)?r.clearRefinements(e):r,a={facetQuery:t,facetName:e};return"number"==typeof n&&(a.maxFacetHits=n),K(G({},X._getHitsSearchParams(i),a))}},Y=X,ee=function(){return Array.prototype.slice.call(arguments).reduceRight((function(e,t){return Object.keys(Object(t)).forEach((function(n){void 0!==t[n]&&(void 0!==e[n]&&delete e[n],e[n]=t[n])})),e}),{})},te=function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]},ne=function(e,t){return e.filter((function(n,r){return t.indexOf(n)>-1&&e.indexOf(n)===r}))},re=function e(t){if("number"==typeof t)return t;if("string"==typeof t)return parseFloat(t);if(Array.isArray(t))return t.map(e);throw new Error("The value should be a number, a parsable string or an array of those.")},ie=ee,ae=z,se=Z,ce={addRefinement:function(e,t,n){if(ce.isRefined(e,t,n))return e;var r=""+n,i=e[t]?e[t].concat(r):[r],a={};return a[t]=i,ie({},a,e)},removeRefinement:function(e,t,n){if(void 0===n)return ce.clearRefinement(e,(function(e,n){return t===n}));var r=""+n;return ce.clearRefinement(e,(function(e,n){return t===n&&r===e}))},toggleRefinement:function(e,t,n){if(void 0===n)throw new Error("toggleRefinement should be used with a value");return ce.isRefined(e,t,n)?ce.removeRefinement(e,t,n):ce.addRefinement(e,t,n)},clearRefinement:function(e,t,n){if(void 0===t)return ae(e)?{}:e;if("string"==typeof t)return se(e,[t]);if("function"==typeof t){var r=!1,i=Object.keys(e).reduce((function(i,a){var s=e[a]||[],c=s.filter((function(e){return!t(e,a,n)}));return c.length!==s.length&&(r=!0),i[a]=c,i}),{});return r?i:e}},isRefined:function(e,t,n){var r=Boolean(e[t])&&e[t].length>0;if(void 0===n||!r)return r;var i=""+n;return-1!==e[t].indexOf(i)}},ue=ee,oe=te,fe=ne,he=J,le=z,de=Z,me=re,ge=function(e){return null!==e&&/^[a-zA-Z0-9_-]{1,64}$/.test(e)},pe=ce;function ve(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every((function(e,n){return ve(t[n],e)})):e===t}function ye(e){var t=e?ye._parseNumbers(e):{};void 0===t.userToken||ge(t.userToken)||console.warn("[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\n  - Format: [a-zA-Z0-9_-]{1,64}"),this.facets=t.facets||[],this.disjunctiveFacets=t.disjunctiveFacets||[],this.hierarchicalFacets=t.hierarchicalFacets||[],this.facetsRefinements=t.facetsRefinements||{},this.facetsExcludes=t.facetsExcludes||{},this.disjunctiveFacetsRefinements=t.disjunctiveFacetsRefinements||{},this.numericRefinements=t.numericRefinements||{},this.tagRefinements=t.tagRefinements||[],this.hierarchicalFacetsRefinements=t.hierarchicalFacetsRefinements||{};var n=this;Object.keys(t).forEach((function(e){var r=-1!==ye.PARAMETERS.indexOf(e),i=void 0!==t[e];!r&&i&&(n[e]=t[e])}))}ye.PARAMETERS=Object.keys(new ye),ye._parseNumbers=function(e){if(e instanceof ye)return e;var t={};if(["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"].forEach((function(n){var r=e[n];if("string"==typeof r){var i=parseFloat(r);t[n]=isNaN(i)?r:i}})),Array.isArray(e.insideBoundingBox)&&(t.insideBoundingBox=e.insideBoundingBox.map((function(e){return Array.isArray(e)?e.map((function(e){return parseFloat(e)})):e}))),e.numericRefinements){var n={};Object.keys(e.numericRefinements).forEach((function(t){var r=e.numericRefinements[t]||{};n[t]={},Object.keys(r).forEach((function(e){var i=r[e].map((function(e){return Array.isArray(e)?e.map((function(e){return"string"==typeof e?parseFloat(e):e})):"string"==typeof e?parseFloat(e):e}));n[t][e]=i}))})),t.numericRefinements=n}return he({},e,t)},ye.make=function(e){var t=new ye(e);return(e.hierarchicalFacets||[]).forEach((function(e){if(e.rootPath){var n=t.getHierarchicalRefinement(e.name);n.length>0&&0!==n[0].indexOf(e.rootPath)&&(t=t.clearRefinements(e.name)),0===(n=t.getHierarchicalRefinement(e.name)).length&&(t=t.toggleHierarchicalFacetRefinement(e.name,e.rootPath))}})),t},ye.validate=function(e,t){var n=t||{};return e.tagFilters&&n.tagRefinements&&n.tagRefinements.length>0?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):e.tagRefinements.length>0&&n.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):e.numericFilters&&n.numericRefinements&&le(n.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):le(e.numericRefinements)&&n.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null},ye.prototype={constructor:ye,clearRefinements:function(e){var t={numericRefinements:this._clearNumericRefinements(e),facetsRefinements:pe.clearRefinement(this.facetsRefinements,e,"conjunctiveFacet"),facetsExcludes:pe.clearRefinement(this.facetsExcludes,e,"exclude"),disjunctiveFacetsRefinements:pe.clearRefinement(this.disjunctiveFacetsRefinements,e,"disjunctiveFacet"),hierarchicalFacetsRefinements:pe.clearRefinement(this.hierarchicalFacetsRefinements,e,"hierarchicalFacet")};return t.numericRefinements===this.numericRefinements&&t.facetsRefinements===this.facetsRefinements&&t.facetsExcludes===this.facetsExcludes&&t.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&t.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(t)},clearTags:function(){return void 0===this.tagFilters&&0===this.tagRefinements.length?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(e){return e===this.index?this:this.setQueryParameters({index:e})},setQuery:function(e){return e===this.query?this:this.setQueryParameters({query:e})},setPage:function(e){return e===this.page?this:this.setQueryParameters({page:e})},setFacets:function(e){return this.setQueryParameters({facets:e})},setDisjunctiveFacets:function(e){return this.setQueryParameters({disjunctiveFacets:e})},setHitsPerPage:function(e){return this.hitsPerPage===e?this:this.setQueryParameters({hitsPerPage:e})},setTypoTolerance:function(e){return this.typoTolerance===e?this:this.setQueryParameters({typoTolerance:e})},addNumericRefinement:function(e,t,n){var r=me(n);if(this.isNumericRefined(e,t,r))return this;var i=he({},this.numericRefinements);return i[e]=he({},i[e]),i[e][t]?(i[e][t]=i[e][t].slice(),i[e][t].push(r)):i[e][t]=[r],this.setQueryParameters({numericRefinements:i})},getConjunctiveRefinements:function(e){return this.isConjunctiveFacet(e)&&this.facetsRefinements[e]||[]},getDisjunctiveRefinements:function(e){return this.isDisjunctiveFacet(e)&&this.disjunctiveFacetsRefinements[e]||[]},getHierarchicalRefinement:function(e){return this.hierarchicalFacetsRefinements[e]||[]},getExcludeRefinements:function(e){return this.isConjunctiveFacet(e)&&this.facetsExcludes[e]||[]},removeNumericRefinement:function(e,t,n){var r=n;return void 0!==r?this.isNumericRefined(e,t,r)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements((function(n,i){return i===e&&n.op===t&&ve(n.val,me(r))}))}):this:void 0!==t?this.isNumericRefined(e,t)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements((function(n,r){return r===e&&n.op===t}))}):this:this.isNumericRefined(e)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements((function(t,n){return n===e}))}):this},getNumericRefinements:function(e){return this.numericRefinements[e]||{}},getNumericRefinement:function(e,t){return this.numericRefinements[e]&&this.numericRefinements[e][t]},_clearNumericRefinements:function(e){if(void 0===e)return le(this.numericRefinements)?{}:this.numericRefinements;if("string"==typeof e)return de(this.numericRefinements,[e]);if("function"==typeof e){var t=!1,n=this.numericRefinements,r=Object.keys(n).reduce((function(r,i){var a=n[i],s={};return a=a||{},Object.keys(a).forEach((function(n){var r=a[n]||[],c=[];r.forEach((function(t){e({val:t,op:n},i,"numeric")||c.push(t)})),c.length!==r.length&&(t=!0),s[n]=c})),r[i]=s,r}),{});return t?r:this.numericRefinements}},addFacet:function(e){return this.isConjunctiveFacet(e)?this:this.setQueryParameters({facets:this.facets.concat([e])})},addDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([e])})},addHierarchicalFacet:function(e){if(this.isHierarchicalFacet(e.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+e.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([e])})},addFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return pe.isRefined(this.facetsRefinements,e,t)?this:this.setQueryParameters({facetsRefinements:pe.addRefinement(this.facetsRefinements,e,t)})},addExcludeRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return pe.isRefined(this.facetsExcludes,e,t)?this:this.setQueryParameters({facetsExcludes:pe.addRefinement(this.facetsExcludes,e,t)})},addDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return pe.isRefined(this.disjunctiveFacetsRefinements,e,t)?this:this.setQueryParameters({disjunctiveFacetsRefinements:pe.addRefinement(this.disjunctiveFacetsRefinements,e,t)})},addTagRefinement:function(e){if(this.isTagRefined(e))return this;var t={tagRefinements:this.tagRefinements.concat(e)};return this.setQueryParameters(t)},removeFacet:function(e){return this.isConjunctiveFacet(e)?this.clearRefinements(e).setQueryParameters({facets:this.facets.filter((function(t){return t!==e}))}):this},removeDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this.clearRefinements(e).setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.filter((function(t){return t!==e}))}):this},removeHierarchicalFacet:function(e){return this.isHierarchicalFacet(e)?this.clearRefinements(e).setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.filter((function(t){return t.name!==e}))}):this},removeFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return pe.isRefined(this.facetsRefinements,e,t)?this.setQueryParameters({facetsRefinements:pe.removeRefinement(this.facetsRefinements,e,t)}):this},removeExcludeRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return pe.isRefined(this.facetsExcludes,e,t)?this.setQueryParameters({facetsExcludes:pe.removeRefinement(this.facetsExcludes,e,t)}):this},removeDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return pe.isRefined(this.disjunctiveFacetsRefinements,e,t)?this.setQueryParameters({disjunctiveFacetsRefinements:pe.removeRefinement(this.disjunctiveFacetsRefinements,e,t)}):this},removeTagRefinement:function(e){if(!this.isTagRefined(e))return this;var t={tagRefinements:this.tagRefinements.filter((function(t){return t!==e}))};return this.setQueryParameters(t)},toggleRefinement:function(e,t){return this.toggleFacetRefinement(e,t)},toggleFacetRefinement:function(e,t){if(this.isHierarchicalFacet(e))return this.toggleHierarchicalFacetRefinement(e,t);if(this.isConjunctiveFacet(e))return this.toggleConjunctiveFacetRefinement(e,t);if(this.isDisjunctiveFacet(e))return this.toggleDisjunctiveFacetRefinement(e,t);throw new Error("Cannot refine the undeclared facet "+e+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsRefinements:pe.toggleRefinement(this.facetsRefinements,e,t)})},toggleExcludeFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsExcludes:pe.toggleRefinement(this.facetsExcludes,e,t)})},toggleDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.setQueryParameters({disjunctiveFacetsRefinements:pe.toggleRefinement(this.disjunctiveFacetsRefinements,e,t)})},toggleHierarchicalFacetRefinement:function(e,t){if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration");var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),r={};return void 0!==this.hierarchicalFacetsRefinements[e]&&this.hierarchicalFacetsRefinements[e].length>0&&(this.hierarchicalFacetsRefinements[e][0]===t||0===this.hierarchicalFacetsRefinements[e][0].indexOf(t+n))?-1===t.indexOf(n)?r[e]=[]:r[e]=[t.slice(0,t.lastIndexOf(n))]:r[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:ue({},r,this.hierarchicalFacetsRefinements)})},addHierarchicalFacetRefinement:function(e,t){if(this.isHierarchicalFacetRefined(e))throw new Error(e+" is already refined.");if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration.");var n={};return n[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:ue({},n,this.hierarchicalFacetsRefinements)})},removeHierarchicalFacetRefinement:function(e){if(!this.isHierarchicalFacetRefined(e))return this;var t={};return t[e]=[],this.setQueryParameters({hierarchicalFacetsRefinements:ue({},t,this.hierarchicalFacetsRefinements)})},toggleTagRefinement:function(e){return this.isTagRefined(e)?this.removeTagRefinement(e):this.addTagRefinement(e)},isDisjunctiveFacet:function(e){return this.disjunctiveFacets.indexOf(e)>-1},isHierarchicalFacet:function(e){return void 0!==this.getHierarchicalFacetByName(e)},isConjunctiveFacet:function(e){return this.facets.indexOf(e)>-1},isFacetRefined:function(e,t){return!!this.isConjunctiveFacet(e)&&pe.isRefined(this.facetsRefinements,e,t)},isExcludeRefined:function(e,t){return!!this.isConjunctiveFacet(e)&&pe.isRefined(this.facetsExcludes,e,t)},isDisjunctiveFacetRefined:function(e,t){return!!this.isDisjunctiveFacet(e)&&pe.isRefined(this.disjunctiveFacetsRefinements,e,t)},isHierarchicalFacetRefined:function(e,t){if(!this.isHierarchicalFacet(e))return!1;var n=this.getHierarchicalRefinement(e);return t?-1!==n.indexOf(t):n.length>0},isNumericRefined:function(e,t,n){if(void 0===n&&void 0===t)return Boolean(this.numericRefinements[e]);var r=this.numericRefinements[e]&&void 0!==this.numericRefinements[e][t];if(void 0===n||!r)return r;var i,a,s=me(n),c=void 0!==(i=this.numericRefinements[e][t],a=s,oe(i,(function(e){return ve(e,a)})));return r&&c},isTagRefined:function(e){return-1!==this.tagRefinements.indexOf(e)},getRefinedDisjunctiveFacets:function(){var e=this,t=fe(Object.keys(this.numericRefinements).filter((function(t){return Object.keys(e.numericRefinements[t]).length>0})),this.disjunctiveFacets);return Object.keys(this.disjunctiveFacetsRefinements).filter((function(t){return e.disjunctiveFacetsRefinements[t].length>0})).concat(t).concat(this.getRefinedHierarchicalFacets()).sort()},getRefinedHierarchicalFacets:function(){var e=this;return fe(this.hierarchicalFacets.map((function(e){return e.name})),Object.keys(this.hierarchicalFacetsRefinements).filter((function(t){return e.hierarchicalFacetsRefinements[t].length>0}))).sort()},getUnrefinedDisjunctiveFacets:function(){var e=this.getRefinedDisjunctiveFacets();return this.disjunctiveFacets.filter((function(t){return-1===e.indexOf(t)}))},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","hierarchicalFacets","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements"],getQueryParams:function(){var e=this.managedParameters,t={},n=this;return Object.keys(this).forEach((function(r){var i=n[r];-1===e.indexOf(r)&&void 0!==i&&(t[r]=i)})),t},setQueryParameter:function(e,t){if(this[e]===t)return this;var n={};return n[e]=t,this.setQueryParameters(n)},setQueryParameters:function(e){if(!e)return this;var t=ye.validate(this,e);if(t)throw t;var n=this,r=ye._parseNumbers(e),i=Object.keys(this).reduce((function(e,t){return e[t]=n[t],e}),{}),a=Object.keys(r).reduce((function(e,t){var n=void 0!==e[t],i=void 0!==r[t];return n&&!i?de(e,[t]):(i&&(e[t]=r[t]),e)}),i);return new this.constructor(a)},resetPage:function(){return void 0===this.page?this:this.setPage(0)},_getHierarchicalFacetSortBy:function(e){return e.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(e){return e.separator||" > "},_getHierarchicalRootPath:function(e){return e.rootPath||null},_getHierarchicalShowParentLevel:function(e){return"boolean"!=typeof e.showParentLevel||e.showParentLevel},getHierarchicalFacetByName:function(e){return oe(this.hierarchicalFacets,(function(t){return t.name===e}))},getHierarchicalFacetBreadcrumb:function(e){if(!this.isHierarchicalFacet(e))return[];var t=this.getHierarchicalRefinement(e)[0];if(!t)return[];var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e));return t.split(n).map((function(e){return e.trim()}))},toString:function(){return JSON.stringify(this,null,2)}};var Re=ye,Fe=te,be=function(e,t){var n=(t||[]).map((function(e){return e.split(":")}));return e.reduce((function(e,t){var r=t.split(":"),i=Fe(n,(function(e){return e[0]===r[0]}));return r.length>1||!i?(e[0].push(r[0]),e[1].push(r[1]),e):(e[0].push(i[0]),e[1].push(i[1]),e)}),[[],[]])};function je(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=void 0!==t,a=null===t;if(!a&&e>t||r&&i||!n)return 1;if(!r&&e<t||a&&n||!i)return-1}return 0}var Pe=function(e,t,n){if(!Array.isArray(e))return[];Array.isArray(n)||(n=[]);var r=e.map((function(e,n){return{criteria:t.map((function(t){return e[t]})),index:n,value:e}}));return r.sort((function(e,t){for(var r=-1;++r<e.criteria.length;){var i=je(e.criteria[r],t.criteria[r]);if(i)return r>=n.length?i:"desc"===n[r]?-i:i}return e.index-t.index})),r.map((function(e){return e.value}))},_e=function(e){return function(t,n){var r=e.hierarchicalFacets[n],i=e.hierarchicalFacetsRefinements[r.name]&&e.hierarchicalFacetsRefinements[r.name][0]||"",a=e._getHierarchicalFacetSeparator(r),s=e._getHierarchicalRootPath(r),c=e._getHierarchicalShowParentLevel(r),u=Se(e._getHierarchicalFacetSortBy(r)),o=t.every((function(e){return e.exhaustive})),f=function(e,t,n,r,i){return function(a,s,c){var u=a;if(c>0){var o=0;for(u=a;o<c;){var f=u&&Array.isArray(u.data)?u.data:[];u=xe(f,(function(e){return e.isRefined})),o++}}if(u){var h=Object.keys(s.data).map((function(e){return[e,s.data[e]]})).filter((function(e){return function(e,t,n,r,i,a){return(!i||0===e.indexOf(i)&&i!==e)&&(!i&&-1===e.indexOf(r)||i&&e.split(r).length-i.split(r).length==1||-1===e.indexOf(r)&&-1===n.indexOf(r)||0===n.indexOf(e)||0===e.indexOf(t+r)&&(a||0===e.indexOf(n)))}(e[0],u.path||n,i,t,n,r)}));u.data=Ee(h.map((function(e){var n=e[0];return function(e,t,n,r,i){var a=t.split(n);return{name:a[a.length-1].trim(),path:t,escapedValue:Oe(t),count:e,isRefined:r===t||0===r.indexOf(t+n),exhaustive:i,data:null}}(e[1],n,t,we(i),s.exhaustive)})),e[0],e[1])}return a}}(u,a,s,c,i),h=t;return s&&(h=t.slice(s.split(a).length)),h.reduce(f,{name:e.hierarchicalFacets[n].name,count:null,isRefined:!0,path:null,escapedValue:null,exhaustive:o,data:null})}},xe=te,Se=be,Ee=Pe,Oe=q.escapeFacetValue,we=q.unescapeFacetValue,He=function(e){return Array.isArray(e)?e.filter(Boolean):[]},Ae=ee,Qe=te,Ne=function(e,t){if(!Array.isArray(e))return-1;for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1},Te=be,De=J,Ce=Pe,Ie=q.escapeFacetValue,ke=q.unescapeFacetValue,Le=_e;function Be(e){var t={};return e.forEach((function(e,n){t[e]=n})),t}function Ue(e,t,n){t&&t[n]&&(e.stats=t[n])}function We(e,t,n){var r=t[0];this._rawResults=t;var i=this;Object.keys(r).forEach((function(e){i[e]=r[e]})),Object.keys(n||{}).forEach((function(e){i[e]=n[e]})),this.processingTimeMS=t.reduce((function(e,t){return void 0===t.processingTimeMS?e:e+t.processingTimeMS}),0),this.disjunctiveFacets=[],this.hierarchicalFacets=e.hierarchicalFacets.map((function(){return[]})),this.facets=[];var a=e.getRefinedDisjunctiveFacets(),s=Be(e.facets),c=Be(e.disjunctiveFacets),u=1,o=r.facets||{};Object.keys(o).forEach((function(t){var n,a,u=o[t],f=(n=e.hierarchicalFacets,a=t,Qe(n,(function(e){return(e.attributes||[]).indexOf(a)>-1})));if(f){var h=f.attributes.indexOf(t),l=Ne(e.hierarchicalFacets,(function(e){return e.name===f.name}));i.hierarchicalFacets[l][h]={attribute:t,data:u,exhaustive:r.exhaustiveFacetsCount}}else{var d,m=-1!==e.disjunctiveFacets.indexOf(t),g=-1!==e.facets.indexOf(t);m&&(d=c[t],i.disjunctiveFacets[d]={name:t,data:u,exhaustive:r.exhaustiveFacetsCount},Ue(i.disjunctiveFacets[d],r.facets_stats,t)),g&&(d=s[t],i.facets[d]={name:t,data:u,exhaustive:r.exhaustiveFacetsCount},Ue(i.facets[d],r.facets_stats,t))}})),this.hierarchicalFacets=He(this.hierarchicalFacets),a.forEach((function(n){var a=t[u],s=a&&a.facets?a.facets:{},o=e.getHierarchicalFacetByName(n);Object.keys(s).forEach((function(t){var n,u=s[t];if(o){n=Ne(e.hierarchicalFacets,(function(e){return e.name===o.name}));var f=Ne(i.hierarchicalFacets[n],(function(e){return e.attribute===t}));if(-1===f)return;i.hierarchicalFacets[n][f].data=De({},i.hierarchicalFacets[n][f].data,u)}else{n=c[t];var h=r.facets&&r.facets[t]||{};i.disjunctiveFacets[n]={name:t,data:Ae({},u,h),exhaustive:a.exhaustiveFacetsCount},Ue(i.disjunctiveFacets[n],a.facets_stats,t),e.disjunctiveFacetsRefinements[t]&&e.disjunctiveFacetsRefinements[t].forEach((function(r){!i.disjunctiveFacets[n].data[r]&&e.disjunctiveFacetsRefinements[t].indexOf(ke(r))>-1&&(i.disjunctiveFacets[n].data[r]=0)}))}})),u++})),e.getRefinedHierarchicalFacets().forEach((function(n){var r=e.getHierarchicalFacetByName(n),a=e._getHierarchicalFacetSeparator(r),s=e.getHierarchicalRefinement(n);0===s.length||s[0].split(a).length<2||t.slice(u).forEach((function(t){var n=t&&t.facets?t.facets:{};Object.keys(n).forEach((function(t){var c=n[t],u=Ne(e.hierarchicalFacets,(function(e){return e.name===r.name})),o=Ne(i.hierarchicalFacets[u],(function(e){return e.attribute===t}));if(-1!==o){var f={};if(s.length>0){var h=s[0].split(a)[0];f[h]=i.hierarchicalFacets[u][o].data[h]}i.hierarchicalFacets[u][o].data=Ae(f,c,i.hierarchicalFacets[u][o].data)}})),u++}))})),Object.keys(e.facetsExcludes).forEach((function(t){var n=e.facetsExcludes[t],a=s[t];i.facets[a]={name:t,data:o[t],exhaustive:r.exhaustiveFacetsCount},n.forEach((function(e){i.facets[a]=i.facets[a]||{name:t},i.facets[a].data=i.facets[a].data||{},i.facets[a].data[e]=0}))})),this.hierarchicalFacets=this.hierarchicalFacets.map(Le(e)),this.facets=He(this.facets),this.disjunctiveFacets=He(this.disjunctiveFacets),this._state=e}function Ve(e,t){function n(e){return e.name===t}if(e._state.isConjunctiveFacet(t)){var r=Qe(e.facets,n);return r?Object.keys(r.data).map((function(n){var i=Ie(n);return{name:n,escapedValue:i,count:r.data[n],isRefined:e._state.isFacetRefined(t,i),isExcluded:e._state.isExcludeRefined(t,n)}})):[]}if(e._state.isDisjunctiveFacet(t)){var i=Qe(e.disjunctiveFacets,n);return i?Object.keys(i.data).map((function(n){var r=Ie(n);return{name:n,escapedValue:r,count:i.data[n],isRefined:e._state.isDisjunctiveFacetRefined(t,r)}})):[]}if(e._state.isHierarchicalFacet(t)){var a=Qe(e.hierarchicalFacets,n);if(!a)return a;var s=e._state.getHierarchicalFacetByName(t),c=e._state._getHierarchicalFacetSeparator(s),u=ke(e._state.getHierarchicalRefinement(t)[0]||"");0===u.indexOf(s.rootPath)&&(u=u.replace(s.rootPath+c,""));var o=u.split(c);return o.unshift(t),qe(a,o,0),a}}function qe(e,t,n){e.isRefined=e.name===t[n],e.data&&e.data.forEach((function(e){qe(e,t,n+1)}))}function Me(e,t,n,r){if(r=r||0,Array.isArray(t))return e(t,n[r]);if(!t.data||0===t.data.length)return t;var i=t.data.map((function(t){return Me(e,t,n,r+1)})),a=e(i,n[r]);return Ae({data:a},t)}function $e(e,t){var n=Qe(e,(function(e){return e.name===t}));return n&&n.stats}function Je(e,t,n,r,i){var a=Qe(i,(function(e){return e.name===n})),s=a&&a.data&&a.data[r]?a.data[r]:0,c=a&&a.exhaustive||!1;return{type:t,attributeName:n,name:r,count:s,exhaustive:c}}We.prototype.getFacetByName=function(e){function t(t){return t.name===e}return Qe(this.facets,t)||Qe(this.disjunctiveFacets,t)||Qe(this.hierarchicalFacets,t)},We.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"],We.prototype.getFacetValues=function(e,t){var n=Ve(this,e);if(n){var r,i=Ae({},t,{sortBy:We.DEFAULT_SORT,facetOrdering:!(t&&t.sortBy)}),a=this;return r=Array.isArray(n)?[e]:a._state.getHierarchicalFacetByName(n.name).attributes,Me((function(e,t){if(i.facetOrdering){var n=function(e,t){return e.renderingContent&&e.renderingContent.facetOrdering&&e.renderingContent.facetOrdering.values&&e.renderingContent.facetOrdering.values[t]}(a,t);if(n)return function(e,t){var n=[],r=[],i=(t.order||[]).reduce((function(e,t,n){return e[t]=n,e}),{});e.forEach((function(e){var t=e.path||e.name;void 0!==i[t]?n[i[t]]=e:r.push(e)})),n=n.filter((function(e){return e}));var a,s=t.sortRemainingBy;return"hidden"===s?n:(a="alpha"===s?[["path","name"],["asc","asc"]]:[["count"],["desc"]],n.concat(Ce(r,a[0],a[1])))}(e,n)}if(Array.isArray(i.sortBy)){var r=Te(i.sortBy,We.DEFAULT_SORT);return Ce(e,r[0],r[1])}if("function"==typeof i.sortBy)return function(e,t){return t.sort(e)}(i.sortBy,e);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")}),n,r)}},We.prototype.getFacetStats=function(e){return this._state.isConjunctiveFacet(e)?$e(this.facets,e):this._state.isDisjunctiveFacet(e)?$e(this.disjunctiveFacets,e):void 0},We.prototype.getRefinements=function(){var e=this._state,t=this,n=[];return Object.keys(e.facetsRefinements).forEach((function(r){e.facetsRefinements[r].forEach((function(e){n.push(Je(0,"facet",r,e,t.facets))}))})),Object.keys(e.facetsExcludes).forEach((function(r){e.facetsExcludes[r].forEach((function(e){n.push(Je(0,"exclude",r,e,t.facets))}))})),Object.keys(e.disjunctiveFacetsRefinements).forEach((function(r){e.disjunctiveFacetsRefinements[r].forEach((function(e){n.push(Je(0,"disjunctive",r,e,t.disjunctiveFacets))}))})),Object.keys(e.hierarchicalFacetsRefinements).forEach((function(r){e.hierarchicalFacetsRefinements[r].forEach((function(i){n.push(function(e,t,n,r){var i=e.getHierarchicalFacetByName(t),a=e._getHierarchicalFacetSeparator(i),s=n.split(a),c=Qe(r,(function(e){return e.name===t})),u=s.reduce((function(e,t){var n=e&&Qe(e.data,(function(e){return e.name===t}));return void 0!==n?n:e}),c),o=u&&u.count||0,f=u&&u.exhaustive||!1,h=u&&u.path||"";return{type:"hierarchical",attributeName:t,name:h,count:o,exhaustive:f}}(e,r,i,t.hierarchicalFacets))}))})),Object.keys(e.numericRefinements).forEach((function(t){var r=e.numericRefinements[t];Object.keys(r).forEach((function(e){r[e].forEach((function(r){n.push({type:"numeric",attributeName:t,name:r,numericValue:r,operator:e})}))}))})),e.tagRefinements.forEach((function(e){n.push({type:"tag",attributeName:"_tags",name:e})})),n};var ze=We,Ze="3.14.1",Ge=V,Ke=q.escapeFacetValue,Xe=J,Ye=z,et=Z,tt=Y,nt=Re,rt=ze,it=Ze;function at(e,t,n){"function"==typeof e.addAlgoliaAgent&&e.addAlgoliaAgent("JS Helper ("+it+")"),this.setClient(e);var r=n||{};r.index=t,this.state=nt.make(r),this.lastResults=null,this._queryId=0,this._lastQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0}function st(e){if(e<0)throw new Error("Page requested below 0.");return this._change({state:this.state.setPage(e),isPageReset:!1}),this}function ct(){return this.state.page}U(at,I),at.prototype.search=function(){return this._search({onlyWithDerivedHelpers:!1}),this},at.prototype.searchOnlyWithDerivedHelpers=function(){return this._search({onlyWithDerivedHelpers:!0}),this},at.prototype.getQuery=function(){var e=this.state;return tt._getHitsSearchParams(e)},at.prototype.searchOnce=function(e,t){var n=e?this.state.setQueryParameters(e):this.state,r=tt._getQueries(n.index,n),i=this;if(this._currentNbQueries++,this.emit("searchOnce",{state:n}),!t)return this.client.search(r).then((function(e){return i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),{content:new rt(n,e.results),state:n,_originalResponse:e}}),(function(e){throw i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),e}));this.client.search(r).then((function(e){i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),t(null,new rt(n,e.results),n)})).catch((function(e){i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),t(e,null,n)}))},at.prototype.findAnswers=function(e){console.warn("[algoliasearch-helper] answers is no longer supported");var t=this.state,n=this.derivedHelpers[0];if(!n)return Promise.resolve([]);var r=n.getModifiedState(t),i=Xe({attributesForPrediction:e.attributesForPrediction,nbHits:e.nbHits},{params:et(tt._getHitsSearchParams(r),["attributesToSnippet","hitsPerPage","restrictSearchableAttributes","snippetEllipsisText"])}),a="search for answers was called, but this client does not have a function client.initIndex(index).findAnswers";if("function"!=typeof this.client.initIndex)throw new Error(a);var s=this.client.initIndex(r.index);if("function"!=typeof s.findAnswers)throw new Error(a);return s.findAnswers(r.query,e.queryLanguages,i)},at.prototype.searchForFacetValues=function(e,t,n,r){var i="function"==typeof this.client.searchForFacetValues,a="function"==typeof this.client.initIndex;if(!i&&!a&&"function"!=typeof this.client.search)throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues");var s=this.state.setQueryParameters(r||{}),c=s.isDisjunctiveFacet(e),u=tt.getSearchForFacetQuery(e,t,n,s);this._currentNbQueries++;var o,f=this;return i?o=this.client.searchForFacetValues([{indexName:s.index,params:u}]):a?o=this.client.initIndex(s.index).searchForFacetValues(u):(delete u.facetName,o=this.client.search([{type:"facet",facet:e,indexName:s.index,params:u}]).then((function(e){return e.results[0]}))),this.emit("searchForFacetValues",{state:s,facet:e,query:t}),o.then((function(t){return f._currentNbQueries--,0===f._currentNbQueries&&f.emit("searchQueueEmpty"),(t=Array.isArray(t)?t[0]:t).facetHits.forEach((function(t){t.escapedValue=Ke(t.value),t.isRefined=c?s.isDisjunctiveFacetRefined(e,t.escapedValue):s.isFacetRefined(e,t.escapedValue)})),t}),(function(e){throw f._currentNbQueries--,0===f._currentNbQueries&&f.emit("searchQueueEmpty"),e}))},at.prototype.setQuery=function(e){return this._change({state:this.state.resetPage().setQuery(e),isPageReset:!0}),this},at.prototype.clearRefinements=function(e){return this._change({state:this.state.resetPage().clearRefinements(e),isPageReset:!0}),this},at.prototype.clearTags=function(){return this._change({state:this.state.resetPage().clearTags(),isPageReset:!0}),this},at.prototype.addDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this},at.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)},at.prototype.addHierarchicalFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addHierarchicalFacetRefinement(e,t),isPageReset:!0}),this},at.prototype.addNumericRefinement=function(e,t,n){return this._change({state:this.state.resetPage().addNumericRefinement(e,t,n),isPageReset:!0}),this},at.prototype.addFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addFacetRefinement(e,t),isPageReset:!0}),this},at.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)},at.prototype.addFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().addExcludeRefinement(e,t),isPageReset:!0}),this},at.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)},at.prototype.addTag=function(e){return this._change({state:this.state.resetPage().addTagRefinement(e),isPageReset:!0}),this},at.prototype.removeNumericRefinement=function(e,t,n){return this._change({state:this.state.resetPage().removeNumericRefinement(e,t,n),isPageReset:!0}),this},at.prototype.removeDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this},at.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)},at.prototype.removeHierarchicalFacetRefinement=function(e){return this._change({state:this.state.resetPage().removeHierarchicalFacetRefinement(e),isPageReset:!0}),this},at.prototype.removeFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeFacetRefinement(e,t),isPageReset:!0}),this},at.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)},at.prototype.removeFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().removeExcludeRefinement(e,t),isPageReset:!0}),this},at.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)},at.prototype.removeTag=function(e){return this._change({state:this.state.resetPage().removeTagRefinement(e),isPageReset:!0}),this},at.prototype.toggleFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().toggleExcludeFacetRefinement(e,t),isPageReset:!0}),this},at.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)},at.prototype.toggleRefinement=function(e,t){return this.toggleFacetRefinement(e,t)},at.prototype.toggleFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().toggleFacetRefinement(e,t),isPageReset:!0}),this},at.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)},at.prototype.toggleTag=function(e){return this._change({state:this.state.resetPage().toggleTagRefinement(e),isPageReset:!0}),this},at.prototype.nextPage=function(){var e=this.state.page||0;return this.setPage(e+1)},at.prototype.previousPage=function(){var e=this.state.page||0;return this.setPage(e-1)},at.prototype.setCurrentPage=st,at.prototype.setPage=st,at.prototype.setIndex=function(e){return this._change({state:this.state.resetPage().setIndex(e),isPageReset:!0}),this},at.prototype.setQueryParameter=function(e,t){return this._change({state:this.state.resetPage().setQueryParameter(e,t),isPageReset:!0}),this},at.prototype.setState=function(e){return this._change({state:nt.make(e),isPageReset:!1}),this},at.prototype.overrideStateWithoutTriggeringChangeEvent=function(e){return this.state=new nt(e),this},at.prototype.hasRefinements=function(e){return!!Ye(this.state.getNumericRefinements(e))||(this.state.isConjunctiveFacet(e)?this.state.isFacetRefined(e):this.state.isDisjunctiveFacet(e)?this.state.isDisjunctiveFacetRefined(e):!!this.state.isHierarchicalFacet(e)&&this.state.isHierarchicalFacetRefined(e))},at.prototype.isExcluded=function(e,t){return this.state.isExcludeRefined(e,t)},at.prototype.isDisjunctiveRefined=function(e,t){return this.state.isDisjunctiveFacetRefined(e,t)},at.prototype.hasTag=function(e){return this.state.isTagRefined(e)},at.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)},at.prototype.getIndex=function(){return this.state.index},at.prototype.getCurrentPage=ct,at.prototype.getPage=ct,at.prototype.getTags=function(){return this.state.tagRefinements},at.prototype.getRefinements=function(e){var t=[];this.state.isConjunctiveFacet(e)?(this.state.getConjunctiveRefinements(e).forEach((function(e){t.push({value:e,type:"conjunctive"})})),this.state.getExcludeRefinements(e).forEach((function(e){t.push({value:e,type:"exclude"})}))):this.state.isDisjunctiveFacet(e)&&this.state.getDisjunctiveRefinements(e).forEach((function(e){t.push({value:e,type:"disjunctive"})}));var n=this.state.getNumericRefinements(e);return Object.keys(n).forEach((function(e){var r=n[e];t.push({value:r,operator:e,type:"numeric"})})),t},at.prototype.getNumericRefinement=function(e,t){return this.state.getNumericRefinement(e,t)},at.prototype.getHierarchicalFacetBreadcrumb=function(e){return this.state.getHierarchicalFacetBreadcrumb(e)},at.prototype._search=function(e){var t=this.state,n=[],r=[];e.onlyWithDerivedHelpers||(r=tt._getQueries(t.index,t),n.push({state:t,queriesCount:r.length,helper:this}),this.emit("search",{state:t,results:this.lastResults}));var i=this.derivedHelpers.map((function(e){var r=e.getModifiedState(t),i=r.index?tt._getQueries(r.index,r):[];return n.push({state:r,queriesCount:i.length,helper:e}),e.emit("search",{state:r,results:e.lastResults}),i})),a=Array.prototype.concat.apply(r,i),s=this._queryId++;if(this._currentNbQueries++,!a.length)return Promise.resolve({results:[]}).then(this._dispatchAlgoliaResponse.bind(this,n,s));try{this.client.search(a).then(this._dispatchAlgoliaResponse.bind(this,n,s)).catch(this._dispatchAlgoliaError.bind(this,s))}catch(c){this.emit("error",{error:c})}},at.prototype._dispatchAlgoliaResponse=function(e,t,n){if(!(t<this._lastQueryIdReceived)){this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,0===this._currentNbQueries&&this.emit("searchQueueEmpty");var r=n.results.slice();e.forEach((function(e){var t=e.state,n=e.queriesCount,i=e.helper,a=r.splice(0,n);t.index?(i.lastResults=new rt(t,a),i.emit("result",{results:i.lastResults,state:t})):i.emit("result",{results:null,state:t})}))}},at.prototype._dispatchAlgoliaError=function(e,t){e<this._lastQueryIdReceived||(this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,this.emit("error",{error:t}),0===this._currentNbQueries&&this.emit("searchQueueEmpty"))},at.prototype.containsRefinement=function(e,t,n,r){return e||0!==t.length||0!==n.length||0!==r.length},at.prototype._hasDisjunctiveRefinements=function(e){return this.state.disjunctiveRefinements[e]&&this.state.disjunctiveRefinements[e].length>0},at.prototype._change=function(e){var t=e.state,n=e.isPageReset;t!==this.state&&(this.state=t,this.emit("change",{state:this.state,results:this.lastResults,isPageReset:n}))},at.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this},at.prototype.setClient=function(e){return this.client===e||("function"==typeof e.addAlgoliaAgent&&e.addAlgoliaAgent("JS Helper ("+it+")"),this.client=e),this},at.prototype.getClient=function(){return this.client},at.prototype.derive=function(e){var t=new Ge(this,e);return this.derivedHelpers.push(t),t},at.prototype.detachDerivedHelper=function(e){var t=this.derivedHelpers.indexOf(e);if(-1===t)throw new Error("Derived helper already detached");this.derivedHelpers.splice(t,1)},at.prototype.hasPendingRequests=function(){return this._currentNbQueries>0};var ut=at,ot=Re,ft=ze;function ht(e,t,n){return new ut(e,t,n)}ht.version=Ze,ht.AlgoliaSearchHelper=ut,ht.SearchParameters=ot,ht.SearchResults=ft;const lt=e("l",n(ht));function dt(e){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dt(e)}var mt=["initialSearchParameters"];function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){vt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==dt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==dt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===dt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yt(e){return function(e){if(Array.isArray(e))return Rt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ft(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var bt=j({name:"index-widget"});function jt(e,t){var n=t.state,r=t.isPageReset,i=t._uiState;n!==e.state&&(e.state=n,e.emit("change",{state:e.state,results:e.lastResults,isPageReset:r,_uiState:i}))}function Pt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.reduce((function(e,n){return b(n)?e:n.getWidgetUiState||n.getWidgetState?n.getWidgetUiState?n.getWidgetUiState(e,t):n.getWidgetState(e,t):e}),n)}function _t(e,t){var n=t.initialSearchParameters,r=Ft(t,mt);return e.filter((function(e){return!b(e)})).reduce((function(e,t){return t.getWidgetSearchParameters?t.getWidgetSearchParameters(e,r):e}),n)}function xt(e){var t=e.filter(b);0!==t.length&&t.forEach((function(e){var t=e.getHelper();jt(t,{state:t.state.resetPage(),isPageReset:!0}),xt(e.getWidgets())}))}function St(e){return e.filter(b).reduce((function(e,t){return e.concat.apply(e,[{indexId:t.getIndexId(),results:t.getResults(),helper:t.getHelper()}].concat(yt(St(t.getWidgets()))))}),[])}function Et(e){var t=e.renderState,n=e.instantSearchInstance,r=e.parent,i=r?r.getIndexId():n.mainIndex.getIndexId();n.renderState=pt(pt({},n.renderState),{},vt({},i,pt(pt({},n.renderState[i]),t)))}e("k",(function(e){if(void 0===e||void 0===e.indexName)throw new Error(bt("The `indexName` option is required."));var t=e.indexName,n=e.indexId,r=void 0===n?t:n,i=[],a={},s=null,c=null,u=null,o=null,f=null;return{$$type:"ais.index",$$widgetType:"ais.index",getIndexName:function(){return t},getIndexId:function(){return r},getHelper:function(){return u},getResults:function(){var e;return null!==(e=o)&&void 0!==e&&e.lastResults?(o.lastResults._state=u.state,o.lastResults):null},getPreviousState:function(){return f},getScopedResults:function(){var e=this.getParent();return St(e?e.getWidgets():[this])},getParent:function(){return c},createURL:function(e){return"function"==typeof e?s._createURL(vt({},r,e(a))):s._createURL(vt({},r,Pt(i,{searchParameters:e,helper:u})))},getWidgets:function(){return i},addWidgets:function(e){var t=this;if(!Array.isArray(e))throw new Error(bt("The `addWidgets` method expects an array of widgets."));if(e.some((function(e){return"function"!=typeof e.init&&"function"!=typeof e.render})))throw new Error(bt("The widget definition expects a `render` and/or an `init` method."));return i=i.concat(e),s&&Boolean(e.length)&&(jt(u,{state:_t(i,{uiState:a,initialSearchParameters:u.state}),_uiState:a}),e.forEach((function(e){e.getRenderState&&Et({renderState:e.getRenderState(s.renderState[t.getIndexId()]||{},N(s,t,s._initialUiState)),instantSearchInstance:s,parent:t})})),e.forEach((function(e){e.init&&e.init(N(s,t,s._initialUiState))})),s.scheduleSearch()),this},removeWidgets:function(e){var t=this;if(!Array.isArray(e))throw new Error(bt("The `removeWidgets` method expects an array of widgets."));if(e.some((function(e){return"function"!=typeof e.dispose})))throw new Error(bt("The widget definition expects a `dispose` method."));if(i=i.filter((function(t){return-1===e.indexOf(t)})),s&&Boolean(e.length)){var n=e.reduce((function(e,n){return n.dispose({helper:u,state:e,parent:t})||e}),u.state);a=Pt(i,{searchParameters:n,helper:u}),u.setState(_t(i,{uiState:a,initialSearchParameters:n})),i.length&&s.scheduleSearch()}return this},init:function(e){var n,h=this,l=e.instantSearchInstance,d=e.parent,m=e.uiState;if(null===u){s=l,c=d,a=m[r]||{};var g=l.mainHelper,p=_t(i,{uiState:a,initialSearchParameters:new lt.SearchParameters({index:t})});(u=lt({},p.index,p)).search=function(){return l.onStateChange?(l.onStateChange({uiState:l.mainIndex.getWidgetUiState({}),setUiState:function(e){return l.setUiState(e,!1)}}),g):g.search()},u.searchWithoutTriggeringOnStateChange=function(){return g.search()},u.searchForFacetValues=function(e,t,n,r){var i=u.state.setQueryParameters(r);return g.searchForFacetValues(e,t,n,i)},o=g.derive((function(){return Q.apply(void 0,yt(function(e){for(var t=e.getParent(),n=[e.getHelper().state];null!==t;)n=[t.getHelper().state].concat(n),t=t.getParent();return n}(h)))}));var v=null===(n=l._initialResults)||void 0===n?void 0:n[this.getIndexId()];if(v){var y=new lt.SearchResults(new lt.SearchParameters(v.state),v.results);o.lastResults=y,u.lastResults=y}u.on("change",(function(e){e.isPageReset&&xt(i)})),o.on("search",(function(){l.scheduleStalledRender()})),o.on("result",(function(e){var t=e.results;l.scheduleRender(),u.lastResults=t,f=null==t?void 0:t._state})),i.forEach((function(e){e.getRenderState&&Et({renderState:e.getRenderState(l.renderState[h.getIndexId()]||{},N(l,h,m)),instantSearchInstance:l,parent:h})})),i.forEach((function(e){e.init&&e.init(N(l,h,m))})),u.on("change",(function(e){var t=e.state,n=e._uiState;a=Pt(i,{searchParameters:t,helper:u},n||{}),l.onStateChange||l.onInternalStateChange()})),v&&l.scheduleRender()}},render:function(e){var t=this,n=e.instantSearchInstance;"error"===n.status&&!n.mainHelper.hasPendingRequests()&&f&&u.setState(f);var r=this.getResults()?i:i.filter(b);r.forEach((function(e){e.getRenderState&&Et({renderState:e.getRenderState(n.renderState[t.getIndexId()]||{},T(n,t)),instantSearchInstance:n,parent:t})})),r.forEach((function(e){e.render&&e.render(T(n,t))}))},dispose:function(){var e,t,n=this;i.forEach((function(e){e.dispose&&e.dispose({helper:u,state:u.state,parent:n})})),s=null,c=null,null===(e=u)||void 0===e||e.removeAllListeners(),u=null,null===(t=o)||void 0===t||t.detach(),o=null},getWidgetUiState:function(e){return i.filter(b).reduce((function(e,t){return t.getWidgetUiState(e)}),pt(pt({},e),{},vt({},r,pt(pt({},e[r]),a))))},getWidgetState:function(e){return this.getWidgetUiState(e)},getWidgetSearchParameters:function(e,t){var n=t.uiState;return _t(i,{uiState:n,initialSearchParameters:e})},refreshUiState:function(){a=Pt(i,{searchParameters:this.getHelper().state,helper:this.getHelper()},a)},setIndexUiState:function(e){var t="function"==typeof e?e(a):e;s.setUiState((function(e){return pt(pt({},e),{},vt({},r,t))}))}}}))}}}));
